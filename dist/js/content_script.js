(()=>{"use strict";var __webpack_modules__={723:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function processElement(element,recipe,parentName="",nthChild=0){let tagName=recipe.tag_name||element.tagName.toLowerCase();tagName.endsWith("_")&&(tagName=tagName.slice(0,-1));const newElement=document.createElement(tagName);let elementText="";if(recipe.text_selector){const e=element.querySelector(recipe.text_selector);e&&(elementText=e.innerText||e.textContent||"")}else recipe.text_js?elementText=eval(recipe.text_js):recipe.add_text&&(elementText=element.innerText||element.textContent||"");elementText=elementText.replace(/\s+/g," ").trim(),recipe.text_format&&elementText&&(elementText=recipe.text_format.replace("{}",elementText)),elementText&&recipe.add_text&&(newElement.textContent=elementText);let elementName="";if(recipe.name&&("from_text"===recipe.name?(elementName=parentName?parentName+".":"",elementName+=elementText.toLowerCase().replace(/[^\w]+/g,"_")):"from_nth_child"===recipe.name?(elementName=parentName?parentName+".":"",elementName+=nthChild.toString()):(elementName=parentName?parentName+".":"",elementName+=recipe.name),newElement.setAttribute("name",elementName),parentName=elementName),recipe.clickable){if(!recipe.name)throw new Error("clickable element must have a name");let e;e=recipe.click_selector?element.querySelector(recipe.click_selector):element,e?e.setAttribute("data-clickable-id",elementName):console.log("click-element not found",element,recipe),window.clickable_recipes||(window.clickable_recipes={}),window.clickable_recipes[elementName]=recipe}if("input"===tagName){const e=element.getAttribute("type");["text","number"].includes(e)?(newElement.setAttribute("value",element.value),element.setAttribute("data-input-id",elementName)):"checkbox"===e?newElement.setAttribute("checked",element.checked.toString()):"radio"===e&&(newElement.setAttribute("checked",element.checked.toString()),element.setAttribute("data-clickable-id",elementName)),window.input_recipes||(window.input_recipes={}),window.input_recipes[elementName]=recipe}if("select"===tagName){element.setAttribute("data-select-id",elementName);const e=element.querySelectorAll("option");e.forEach((e=>{const t=e.getAttribute("value")||e.textContent.trim(),n=elementName+"."+t,r=document.createElement("option");r.textContent=e.textContent,r.setAttribute("value",t),r.setAttribute("name",n),r.setAttribute("selected",e.selected.toString()),e.setAttribute("data-clickable-id",n),newElement.appendChild(r)}))}const attrsToCopy=["alt","title","type","value","role","aria-label","aria-hidden","aria-selected"];if(attrsToCopy.forEach((e=>{const t=element.getAttribute(e);t&&newElement.setAttribute(e,t)})),recipe.keep_attr)for(const e in recipe.keep_attr){const t=element.getAttribute(e);t&&newElement.setAttribute(e,t)}if(recipe.class&&newElement.setAttribute("class",recipe.class),recipe.id&&newElement.setAttribute("id",recipe.id),recipe.override_attr)for(const key in recipe.override_attr)newElement.setAttribute(key,eval(recipe.override_attr[key]));if(recipe.children&&recipe.children.length>0)for(const e of recipe.children){const t=e.direct_child?`:scope > ${e.selector}`:e.selector,n=element.querySelectorAll(t);n.forEach(((t,n)=>{const r=processElement(t,e,parentName,n);if(newElement.appendChild(r),e.insert_split_marker&&n%(e.insert_split_marker_every||1)==0){const e=document.createElement("split-marker");newElement.appendChild(e)}if(e.insert_split_marker){const e=document.createElement("split-marker");newElement.appendChild(e)}else console.log("no split marker")}))}if(recipe.empty_message&&0===newElement.children.length){const e=document.createTextNode(recipe.empty_message);newElement.appendChild(e)}return newElement}__webpack_require__.d(__webpack_exports__,{q:()=>processElement})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={},_utils_element_processor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(723),__awaiter=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function i(e){try{a(r.next(e))}catch(e){c(e)}}function l(e){try{a(r.throw(e))}catch(e){c(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}a((r=r.apply(e,t||[])).next())}))};let lastScrollTime=0;const SCROLL_THRESHOLD=1500;function generateHtmlSnapshotId(){const e=window.location.href,t=(new Date).toISOString();return`html_${hashCode(e)}_${t}`}function hashCode(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return console.log("Hash value before return:",t),t.toString()}function getClickableElementsInViewport(){const e=[];return document.querySelectorAll('a, button, [onclick], input[type="button"], input[type="submit"]').forEach((t=>{const n=t.getBoundingClientRect();n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)&&e.push({tagName:t.tagName,className:t.className,id:t.id,innerText:t.innerText.trim(),outerHTML:t.outerHTML.trim()})})),e}function captureInteraction(e,t,n,r,o,c){return __awaiter(this,void 0,void 0,(function*(){try{const i=generateHtmlSnapshotId();yield new Promise(((e,t)=>{chrome.storage.local.get(["htmlSnapshots"],(n=>{const r=n.htmlSnapshots||{};r[i]=document.documentElement.outerHTML,chrome.storage.local.set({htmlSnapshots:r},(()=>{chrome.runtime.lastError?t(chrome.runtime.lastError):e(void 0)}))}))}));const l={eventType:e,timestamp:n,target:t,targetOuterHTML:t.outerHTML,targetClass:t.className,targetId:t.id,targetText:t.innerText||t.value||"",htmlSnapshotId:i,selector:r||"",clickableId:o||"",url:c||""};yield chrome.runtime.sendMessage({action:"saveData",data:l})}catch(t){console.error(`Error during ${e} event handling:`,t)}}))}function getUniqueSelector(e){if(e.id)return`#${e.id}`;if(e.className){const t=e.className.trim().split(/\s+/).join(".");return`${e.tagName.toLowerCase()}.${t}`}return e.tagName.toLowerCase()}function getFullSelector(e){let t=[];for(;e.parentElement;)t.unshift(getUniqueSelector(e)),e=e.parentElement;return t.join(" > ")}function captureScreenshot(e){return __awaiter(this,void 0,void 0,(function*(){try{const t=`screenshot_${e}`;yield chrome.runtime.sendMessage({action:"captureScreenshot",screenshotId:t})}catch(e){console.error("Error capturing screenshot:",e)}}))}document.addEventListener("DOMContentLoaded",(()=>__awaiter(void 0,void 0,void 0,(function*(){console.log("DOMContentLoaded");const e=window.location.href;try{const t=yield new Promise((t=>{chrome.runtime.sendMessage({action:"getRecipe",url:e},t)}));if(console.log("response"),t&&t.recipe){const e=t.recipe,n=document.querySelector(e.selector);if(n){const t=(0,_utils_element_processor__WEBPACK_IMPORTED_MODULE_0__.q)(n,e);console.log(t.outerHTML)}}}catch(e){console.error("Error initializing clickable elements:",e)}})))),document.addEventListener("scroll",(e=>__awaiter(void 0,void 0,void 0,(function*(){try{const t=Date.now();if(t-lastScrollTime>=SCROLL_THRESHOLD){lastScrollTime=t;const n=(new Date).toISOString();yield captureInteraction("scroll",e.target,n,"","",""),yield captureScreenshot(n)}}catch(e){console.error("Error during scroll event handling:",e)}})))),document.addEventListener("blur",(e=>__awaiter(void 0,void 0,void 0,(function*(){const t=e.target;if(t&&("INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName)){const e=(new Date).toISOString();yield captureScreenshot(e),yield captureInteraction("input",t,e,"","","")}}))),!0),document.addEventListener("click",(e=>{try{function t(e,n=0){return!e||n>=2?null:e.hasAttribute("data-clickable-id")?e:t(e.parentElement,n+1)}const n=t(e.target),r=n&&n.getAttribute("data-clickable-id")||"";console.log("click");const o=(new Date).toISOString();console.log(o);const c=getFullSelector(e.target);console.log("srart screenshot"),captureScreenshot(o),console.log("end screenshot"),captureInteraction("click",e.target,o,c,r,""),console.log("end")}catch(i){console.error("Error during click event handling:",i)}})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll('input[id="placeOrder"], input[id="turbo-checkout-pyo-button"]');const e=document.querySelector('input[id="buy-now-button"]'),t=document.querySelector('button[id="rcx-subscribe-submit-button-announce"]'),n=document.querySelector('input[name="proceedToRetailCheckout"]');[e,t].forEach((e=>{e&&e.addEventListener("click",(()=>__awaiter(void 0,void 0,void 0,(function*(){var t,n,r,o,c;try{const i={title:(null===(n=null===(t=document.querySelector("#title"))||void 0===t?void 0:t.innerText)||void 0===n?void 0:n.trim())||"",price:(null===(o=null===(r=document.querySelector("span.a-price.aok-align-center.reinventPricePriceToPayMargin.priceToPay"))||void 0===r?void 0:r.innerText)||void 0===o?void 0:o.trim())||"",asin:(null===(c=document.querySelector("input#ASIN"))||void 0===c?void 0:c.value)||"",options:{}};Array.from(document.querySelectorAll("#twister div.a-row:has(label.a-form-label):has(span.selection)")).forEach((e=>{var t,n,r;const o=(null===(n=null===(t=e.querySelector("label.a-form-label"))||void 0===t?void 0:t.innerText)||void 0===n?void 0:n.replace(": ",""))||"",c=(null===(r=e.querySelector("span.selection"))||void 0===r?void 0:r.innerText)||"";o&&c&&(i.options[o]=c)})),console.log(`${e.id} clicked - Product Info:`,i);const l=(yield chrome.storage.local.get({orderDetails:[]})).orderDetails||[];l.push({name:i.title,price:parseFloat(i.price.replace(/[^0-9.]/g,"")),asin:i.asin,options:i.options}),yield chrome.storage.local.set({orderDetails:l})}catch(t){console.error(`Error capturing ${e.id} product info:`,t)}}))))})),n&&n.addEventListener("click",(e=>__awaiter(void 0,void 0,void 0,(function*(){var e,t,n;try{const r=[],o=Array.from(document.querySelectorAll('[id^="sc-active-"]')).filter((e=>"sc-active-cart"!==e.id));for(const c of o){const o=c.querySelector('input[type="checkbox"]');if(o&&o.checked){const o=c.querySelector(".sc-item-product-title-cont .sc-product-link");if(o){const i=o.querySelector(".a-truncate-full"),l=(null===(e=null==i?void 0:i.textContent)||void 0===e?void 0:e.trim())||"",a=(null===(t=(o.getAttribute("href")||"").match(/product\/([A-Z0-9]{10})/))||void 0===t?void 0:t[1])||"",s=c.querySelector(".sc-item-price-block .a-offscreen"),d=s?parseFloat((null===(n=s.textContent)||void 0===n?void 0:n.replace(/[^0-9.]/g,""))||"0"):0,m={};c.querySelectorAll(".sc-product-variation").forEach((e=>{var t,n,r,o;const c=(null===(n=null===(t=e.querySelector(".a-text-bold"))||void 0===t?void 0:t.textContent)||void 0===n?void 0:n.trim().replace(":",""))||"",i=(null===(o=null===(r=e.querySelector(".a-size-small:not(.a-text-bold)"))||void 0===r?void 0:r.textContent)||void 0===o?void 0:o.trim())||"";c&&i&&(m[c]=i)})),r.push({name:l,asin:a,price:d,options:m})}}}if(r.length>0){const e=((yield chrome.storage.local.get({orderDetails:[]})).orderDetails||[]).concat(r);yield chrome.storage.local.set({orderDetails:e}),console.log("Stored selected cart items:",r)}}catch(e){console.error("Error capturing selected cart items:",e)}}))))})),chrome.runtime.onMessage.addListener(((e,t,n)=>("getHTML"===e.action&&n({html:document.documentElement.outerHTML}),!0)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudF9zY3JpcHQuanMiLCJtYXBwaW5ncyI6Im9IQUFPLFNBQVNBLGVBQWVDLFFBQVNDLE9BQVFDLFdBQWEsR0FBSUMsU0FBVyxHQUV4RSxJQUFJQyxRQUFVSCxPQUFPSSxVQUFZTCxRQUFRSSxRQUFRRSxjQUU3Q0YsUUFBUUcsU0FBUyxPQUNqQkgsUUFBVUEsUUFBUUksTUFBTSxHQUFJLElBRWhDLE1BQU1DLFdBQWFDLFNBQVNDLGNBQWNQLFNBRTFDLElBQUlRLFlBQWMsR0FDbEIsR0FBSVgsT0FBT1ksY0FBZSxDQUN0QixNQUFNQyxFQUFjZCxRQUFRZSxjQUFjZCxPQUFPWSxlQUM3Q0MsSUFDQUYsWUFBY0UsRUFBWUUsV0FBYUYsRUFBWUcsYUFBZSxHQUUxRSxNQUNTaEIsT0FBT2lCLFFBQ1pOLFlBQWNPLEtBQUtsQixPQUFPaUIsU0FFckJqQixPQUFPbUIsV0FDWlIsWUFBY1osUUFBUWdCLFdBQWFoQixRQUFRaUIsYUFBZSxJQUU5REwsWUFBY0EsWUFBWVMsUUFBUSxPQUFRLEtBQUtDLE9BQzNDckIsT0FBT3NCLGFBQWVYLGNBQ3RCQSxZQUFjWCxPQUFPc0IsWUFBWUYsUUFBUSxLQUFNVCxjQUUvQ0EsYUFBZVgsT0FBT21CLFdBQ3RCWCxXQUFXUSxZQUFjTCxhQUc3QixJQUFJWSxZQUFjLEdBa0JsQixHQWpCSXZCLE9BQU93QixPQUNhLGNBQWhCeEIsT0FBT3dCLE1BQ1BELFlBQWN0QixXQUFhQSxXQUFhLElBQU0sR0FDOUNzQixhQUFlWixZQUFZTixjQUFjZSxRQUFRLFVBQVcsTUFFdkMsbUJBQWhCcEIsT0FBT3dCLE1BQ1pELFlBQWN0QixXQUFhQSxXQUFhLElBQU0sR0FDOUNzQixhQUFlckIsU0FBU3VCLGFBR3hCRixZQUFjdEIsV0FBYUEsV0FBYSxJQUFNLEdBQzlDc0IsYUFBZXZCLE9BQU93QixNQUUxQmhCLFdBQVdrQixhQUFhLE9BQVFILGFBQ2hDdEIsV0FBYXNCLGFBR2J2QixPQUFPMkIsVUFBVyxDQUNsQixJQUFLM0IsT0FBT3dCLEtBQ1IsTUFBTSxJQUFJSSxNQUFNLHNDQUdwQixJQUFJQyxFQUVBQSxFQURBN0IsT0FBTzhCLGVBQ1MvQixRQUFRZSxjQUFjZCxPQUFPOEIsZ0JBRzdCL0IsUUFFaEI4QixFQUNBQSxFQUFjSCxhQUFhLG9CQUFxQkgsYUFHaERRLFFBQVFDLElBQUksMEJBQTJCakMsUUFBU0MsUUFFL0NpQyxPQUFPQyxvQkFDUkQsT0FBT0Msa0JBQW9CLENBQUMsR0FFaENELE9BQU9DLGtCQUFrQlgsYUFBZXZCLE1BQzVDLENBQ0EsR0FBZ0IsVUFBWkcsUUFBcUIsQ0FDckIsTUFBTWdDLEVBQVlwQyxRQUFRcUMsYUFBYSxRQUNuQyxDQUFDLE9BQVEsVUFBVUMsU0FBU0YsSUFDNUIzQixXQUFXa0IsYUFBYSxRQUFTM0IsUUFBUXVDLE9BQ3pDdkMsUUFBUTJCLGFBQWEsZ0JBQWlCSCxjQUVuQixhQUFkWSxFQUNMM0IsV0FBV2tCLGFBQWEsVUFBVzNCLFFBQVF3QyxRQUFRZCxZQUVoQyxVQUFkVSxJQUNMM0IsV0FBV2tCLGFBQWEsVUFBVzNCLFFBQVF3QyxRQUFRZCxZQUNuRDFCLFFBQVEyQixhQUFhLG9CQUFxQkgsY0FFekNVLE9BQU9PLGdCQUNSUCxPQUFPTyxjQUFnQixDQUFDLEdBRTVCUCxPQUFPTyxjQUFjakIsYUFBZXZCLE1BQ3hDLENBRUEsR0FBZ0IsV0FBWkcsUUFBc0IsQ0FFdEJKLFFBQVEyQixhQUFhLGlCQUFrQkgsYUFDdkMsTUFBTWtCLEVBQVUxQyxRQUFRMkMsaUJBQWlCLFVBQ3pDRCxFQUFRRSxTQUFTQyxJQUNiLE1BQU1DLEVBQWNELEVBQU9SLGFBQWEsVUFBWVEsRUFBTzVCLFlBQVlLLE9BQ2pFeUIsRUFBYXZCLFlBQWMsSUFBTXNCLEVBQ2pDRSxFQUFZdEMsU0FBU0MsY0FBYyxVQUN6Q3FDLEVBQVUvQixZQUFjNEIsRUFBTzVCLFlBQy9CK0IsRUFBVXJCLGFBQWEsUUFBU21CLEdBQ2hDRSxFQUFVckIsYUFBYSxPQUFRb0IsR0FDL0JDLEVBQVVyQixhQUFhLFdBQVlrQixFQUFPSSxTQUFTdkIsWUFDbkRtQixFQUFPbEIsYUFBYSxvQkFBcUJvQixHQUN6Q3RDLFdBQVd5QyxZQUFZRixFQUFVLEdBRXpDLENBRUEsTUFBTUcsWUFBYyxDQUFDLE1BQU8sUUFBUyxPQUFRLFFBQVMsT0FBUSxhQUFjLGNBQWUsaUJBTzNGLEdBTkFBLFlBQVlQLFNBQVNRLElBQ2pCLE1BQU1iLEVBQVF2QyxRQUFRcUMsYUFBYWUsR0FDL0JiLEdBQ0E5QixXQUFXa0IsYUFBYXlCLEVBQU1iLEVBQ2xDLElBRUF0QyxPQUFPb0QsVUFDUCxJQUFLLE1BQU1DLEtBQU9yRCxPQUFPb0QsVUFBVyxDQUNoQyxNQUFNZCxFQUFRdkMsUUFBUXFDLGFBQWFpQixHQUMvQmYsR0FDQTlCLFdBQVdrQixhQUFhMkIsRUFBS2YsRUFFckMsQ0FTSixHQVBJdEMsT0FBYyxPQUNkUSxXQUFXa0IsYUFBYSxRQUFTMUIsT0FBYyxPQUUvQ0EsT0FBVyxJQUNYUSxXQUFXa0IsYUFBYSxLQUFNMUIsT0FBVyxJQUd6Q0EsT0FBT3NELGNBQ1AsSUFBSyxNQUFNRCxPQUFPckQsT0FBT3NELGNBQ3JCOUMsV0FBV2tCLGFBQWEyQixJQUFLbkMsS0FBS2xCLE9BQU9zRCxjQUFjRCxPQUkvRCxHQUFJckQsT0FBT3VELFVBQVl2RCxPQUFPdUQsU0FBU0MsT0FBUyxFQUM1QyxJQUFLLE1BQU1DLEtBQWV6RCxPQUFPdUQsU0FBVSxDQUN2QyxNQUFNRyxFQUFXRCxFQUFZRSxhQUFlLFlBQVlGLEVBQVlDLFdBQWFELEVBQVlDLFNBQ3ZGRSxFQUFnQjdELFFBQVEyQyxpQkFBaUJnQixHQUMvQ0UsRUFBY2pCLFNBQVEsQ0FBQ2tCLEVBQWNDLEtBQ2pDLE1BQU1DLEVBQVlqRSxlQUFlK0QsRUFBY0osRUFBYXhELFdBQVk2RCxHQUV4RSxHQURBdEQsV0FBV3lDLFlBQVljLEdBQ25CTixFQUFZTyxxQkFFUkYsR0FEVUwsRUFBWVEsMkJBQTZCLElBQ2xDLEVBQUcsQ0FDcEIsTUFBTUMsRUFBY3pELFNBQVNDLGNBQWMsZ0JBQzNDRixXQUFXeUMsWUFBWWlCLEVBRTNCLENBRUosR0FBSVQsRUFBWU8sb0JBQXFCLENBRWpDLE1BQU1FLEVBQWN6RCxTQUFTQyxjQUFjLGdCQUMzQ0YsV0FBV3lDLFlBQVlpQixFQUMzQixNQUVJbkMsUUFBUUMsSUFBSSxrQkFDaEIsR0FFUixDQUdKLEdBQUloQyxPQUFPbUUsZUFBZ0QsSUFBL0IzRCxXQUFXK0MsU0FBU0MsT0FBYyxDQUMxRCxNQUFNWSxFQUFnQjNELFNBQVM0RCxlQUFlckUsT0FBT21FLGVBQ3JEM0QsV0FBV3lDLFlBQVltQixFQUMzQixDQUNBLE9BQU81RCxVQUNYLEMsb0VDdEtJOEQseUJBQTJCLENBQUMsRUFHaEMsU0FBU0Msb0JBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCx5QkFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhRSxRQUdyQixJQUFJQyxFQUFTTix5QkFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLG9CQUFvQkwsR0FBVUksRUFBUUEsRUFBT0QsUUFBU0oscUJBRy9DSyxFQUFPRCxPQUNmLENDckJBSixvQkFBb0JPLEVBQUksQ0FBQ0gsRUFBU0ksS0FDakMsSUFBSSxJQUFJMUIsS0FBTzBCLEVBQ1hSLG9CQUFvQlMsRUFBRUQsRUFBWTFCLEtBQVNrQixvQkFBb0JTLEVBQUVMLEVBQVN0QixJQUM1RTRCLE9BQU9DLGVBQWVQLEVBQVN0QixFQUFLLENBQUU4QixZQUFZLEVBQU1DLElBQUtMLEVBQVcxQixJQUUxRSxFQ05Ea0Isb0JBQW9CUyxFQUFJLENBQUNLLEVBQUtDLElBQVVMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEcsMEdDQTlFSSxVQUF3QyxTQUFVQyxFQUFTQyxFQUFZQyxFQUFHQyxHQUUxRSxPQUFPLElBQUtELElBQU1BLEVBQUlFLFdBQVUsU0FBVUMsRUFBU0MsR0FDL0MsU0FBU0MsRUFBVTVELEdBQVMsSUFBTTZELEVBQUtMLEVBQVVNLEtBQUs5RCxHQUFTLENBQUUsTUFBTytELEdBQUtKLEVBQU9JLEVBQUksQ0FBRSxDQUMxRixTQUFTQyxFQUFTaEUsR0FBUyxJQUFNNkQsRUFBS0wsRUFBaUIsTUFBRXhELEdBQVMsQ0FBRSxNQUFPK0QsR0FBS0osRUFBT0ksRUFBSSxDQUFFLENBQzdGLFNBQVNGLEVBQUtJLEdBSmxCLElBQWVqRSxFQUlhaUUsRUFBT0MsS0FBT1IsRUFBUU8sRUFBT2pFLFFBSjFDQSxFQUl5RGlFLEVBQU9qRSxNQUpoREEsYUFBaUJ1RCxFQUFJdkQsRUFBUSxJQUFJdUQsR0FBRSxTQUFVRyxHQUFXQSxFQUFRMUQsRUFBUSxLQUlqQm1FLEtBQUtQLEVBQVdJLEVBQVcsQ0FDN0dILEdBQU1MLEVBQVlBLEVBQVVZLE1BQU1mLEVBQVNDLEdBQWMsS0FBS1EsT0FDbEUsR0FDSixFQUVBLElBQUlPLGVBQWlCLEVBQ3JCLE1BQU1DLGlCQUFtQixLQWdDekIsU0FBU0MseUJBQ0wsTUFBTUMsRUFBTTdFLE9BQU84RSxTQUFTQyxLQUN0QkMsR0FBWSxJQUFJQyxNQUFPQyxjQUM3QixNQUFPLFFBQVFDLFNBQVNOLE1BQVFHLEdBQ3BDLENBQ0EsU0FBU0csU0FBU0MsR0FDZCxJQUFJQyxFQUFPLEVBQ1gsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlGLEVBQUk3RCxPQUFRK0QsSUFDNUJELEdBQVNBLEdBQVEsR0FBS0EsRUFBUUQsRUFBSUcsV0FBV0QsR0FDN0NELEdBQVEsRUFHWixPQURBdkYsUUFBUUMsSUFBSSw0QkFBNkJzRixHQUNsQ0EsRUFBSzdGLFVBQ2hCLENBRUEsU0FBU2dHLGlDQUNMLE1BQU1DLEVBQW9CLEdBbUIxQixPQWpCb0JqSCxTQUFTaUMsaUJBQWlCLG9FQUVsQ0MsU0FBUzVDLElBQ2pCLE1BQU00SCxFQUFPNUgsRUFBUTZILHdCQUNqQkQsRUFBS0UsS0FBTyxHQUNaRixFQUFLRyxNQUFRLEdBQ2JILEVBQUtJLFNBQVc5RixPQUFPK0YsYUFBZXZILFNBQVN3SCxnQkFBZ0JDLGVBQy9EUCxFQUFLUSxRQUFVbEcsT0FBT21HLFlBQWMzSCxTQUFTd0gsZ0JBQWdCSSxjQUM3RFgsRUFBa0JZLEtBQUssQ0FDbkJuSSxRQUFTSixFQUFRSSxRQUNqQm9JLFVBQVd4SSxFQUFRd0ksVUFDbkJDLEdBQUl6SSxFQUFReUksR0FDWnpILFVBQVdoQixFQUFRZ0IsVUFBVU0sT0FDN0JvSCxVQUFXMUksRUFBUTBJLFVBQVVwSCxRQUVyQyxJQUVHcUcsQ0FDWCxDQUVBLFNBQVNnQixtQkFBbUJDLEVBQVdDLEVBQVEzQixFQUFXdkQsRUFBVW1GLEVBQWEvQixHQUM3RSxPQUFPcEIsVUFBVW9ELFVBQU0sT0FBUSxHQUFRLFlBQ25DLElBRUksTUFBTUMsRUFBb0JsQywrQkFFcEIsSUFBSWQsU0FBUSxDQUFDQyxFQUFTQyxLQUN4QitDLE9BQU9DLFFBQVFDLE1BQU05RCxJQUFJLENBQUMsa0JBQW1CbUIsSUFDekMsTUFBTTRDLEVBQWdCNUMsRUFBTzRDLGVBQWlCLENBQUMsRUFDL0NBLEVBQWNKLEdBQXFCdEksU0FBU3dILGdCQUFnQlEsVUFDNURPLE9BQU9DLFFBQVFDLE1BQU1FLElBQUksQ0FBRUQsa0JBQWlCLEtBQ3BDSCxPQUFPSyxRQUFRQyxVQUNmckQsRUFBTytDLE9BQU9LLFFBQVFDLFdBR3RCdEQsT0FBUSxFQUNaLEdBQ0YsR0FDSixJQUdOLE1BQU11RCxFQUFPLENBQ1RaLFlBQ0ExQixVQUFXQSxFQUNYMkIsT0FBUUEsRUFDUlksZ0JBQWlCWixFQUFPSCxVQUN4QmdCLFlBQWFiLEVBQU9MLFVBQ3BCbUIsU0FBVWQsRUFBT0osR0FDakJtQixXQUFZZixFQUFPN0gsV0FBYTZILEVBQU90RyxPQUFTLEdBQ2hEc0gsZUFBZ0JiLEVBRWhCckYsU0FBVUEsR0FBWSxHQUN0Qm1GLFlBQWFBLEdBQWUsR0FDNUIvQixJQUFLQSxHQUFPLFVBRVZrQyxPQUFPSyxRQUFRUSxZQUFZLENBQUVDLE9BQVEsV0FBWVAsUUFDM0QsQ0FDQSxNQUFPUSxHQUNIaEksUUFBUWdJLE1BQU0sZ0JBQWdCcEIsb0JBQTZCb0IsRUFDL0QsQ0FDSixHQUNKLENBMkJBLFNBQVNDLGtCQUFrQmpLLEdBQ3ZCLEdBQUlBLEVBQVF5SSxHQUNSLE1BQU8sSUFBSXpJLEVBQVF5SSxLQUV2QixHQUFJekksRUFBUXdJLFVBQVcsQ0FDbkIsTUFBTUEsRUFBWXhJLEVBQVF3SSxVQUFVbEgsT0FBTzRJLE1BQU0sT0FBT0MsS0FBSyxLQUM3RCxNQUFPLEdBQUduSyxFQUFRSSxRQUFRRSxpQkFBaUJrSSxHQUMvQyxDQUNBLE9BQU94SSxFQUFRSSxRQUFRRSxhQUMzQixDQUNBLFNBQVM4SixnQkFBZ0JwSyxHQUNyQixJQUFJcUssRUFBTyxHQUNYLEtBQU9ySyxFQUFRc0ssZUFDWEQsRUFBS0UsUUFBUU4sa0JBQWtCakssSUFDL0JBLEVBQVVBLEVBQVFzSyxjQUV0QixPQUFPRCxFQUFLRixLQUFLLE1BQ3JCLENBNEJBLFNBQVNLLGtCQUFrQnRELEdBQ3ZCLE9BQU92QixVQUFVb0QsVUFBTSxPQUFRLEdBQVEsWUFDbkMsSUFFSSxNQUFNMEIsRUFBZSxjQUFjdkQsVUFFN0IrQixPQUFPSyxRQUFRUSxZQUFZLENBQUVDLE9BQVEsb0JBQXFCVSxnQkFDcEUsQ0FDQSxNQUFPVCxHQUNIaEksUUFBUWdJLE1BQU0sOEJBQStCQSxFQUNqRCxDQUNKLEdBQ0osQ0FsTUF0SixTQUFTZ0ssaUJBQWlCLG9CQUFvQixJQUFNL0UsZUFBVSxPQUFRLE9BQVEsR0FBUSxZQUNsRjNELFFBQVFDLElBQUksb0JBQ1osTUFBTThFLEVBQU03RSxPQUFPOEUsU0FBU0MsS0FDNUIsSUFDSSxNQUFNMEQsUUFBaUIsSUFBSTNFLFNBQVFDLElBQy9CZ0QsT0FBT0ssUUFBUVEsWUFBWSxDQUN2QkMsT0FBUSxZQUNSaEQsSUFBS0EsR0FDTmQsRUFBUSxJQUdmLEdBREFqRSxRQUFRQyxJQUFJLFlBQ1IwSSxHQUFZQSxFQUFTMUssT0FBUSxDQUM3QixNQUFNQSxFQUFTMEssRUFBUzFLLE9BQ2xCMkssRUFBY2xLLFNBQVNLLGNBQWNkLEVBQU8wRCxVQUNsRCxHQUFJaUgsRUFBYSxDQUNiLE1BQU1DLEdBQVUsMkRBQWVELEVBQWEzSyxHQUM1QytCLFFBQVFDLElBQUk0SSxFQUFRbkMsVUFDeEIsQ0FDSixDQUNKLENBQ0EsTUFBT3NCLEdBQ0hoSSxRQUFRZ0ksTUFBTSx5Q0FBMENBLEVBQzVELENBUUosTUFrRkF0SixTQUFTZ0ssaUJBQWlCLFVBQVdJLEdBQVVuRixlQUFVLE9BQVEsT0FBUSxHQUFRLFlBQzdFLElBQ0ksTUFBTW9GLEVBQWM1RCxLQUFLNkQsTUFDekIsR0FBSUQsRUFBY25FLGdCQUFrQkMsaUJBQWtCLENBQ2xERCxlQUFpQm1FLEVBQ2pCLE1BQU03RCxHQUFZLElBQUlDLE1BQU9DLG9CQUN2QnVCLG1CQUFtQixTQUFVbUMsRUFBTWpDLE9BQVEzQixFQUFXLEdBQUksR0FBSSxVQUM5RHNELGtCQUFrQnRELEVBQzVCLENBQ0osQ0FDQSxNQUFPOEMsR0FDSGhJLFFBQVFnSSxNQUFNLHNDQUF1Q0EsRUFDekQsQ0FDSixNQUNBdEosU0FBU2dLLGlCQUFpQixRQUFTSSxHQUFVbkYsZUFBVSxPQUFRLE9BQVEsR0FBUSxZQUMzRSxNQUFNa0QsRUFBU2lDLEVBQU1qQyxPQUNyQixHQUFJQSxJQUNxQixVQUFuQkEsRUFBT3pJLFNBQXVDLFNBQWhCeUksRUFBT29DLE1BQ2hCLGFBQW5CcEMsRUFBT3pJLFNBQXlCLENBQ3BDLE1BQU04RyxHQUFZLElBQUlDLE1BQU9DLG9CQUN2Qm9ELGtCQUFrQnRELFNBQ2xCeUIsbUJBQW1CLFFBQVNFLEVBQVEzQixFQUFXLEdBQUksR0FBSSxHQUNqRSxDQUNKLE1BQUksR0FvQkp4RyxTQUFTZ0ssaUJBQWlCLFNBQVVJLElBQ2hDLElBQ0ksU0FBU0ksRUFBb0JsTCxFQUFTbUwsRUFBUSxHQUMxQyxPQUFLbkwsR0FBV21MLEdBQVMsRUFDZCxLQUNQbkwsRUFBUW9MLGFBQWEscUJBQ2RwTCxFQUVKa0wsRUFBb0JsTCxFQUFRc0ssY0FBZWEsRUFBUSxFQUM5RCxDQUNBLE1BQU1FLEVBQW1CSCxFQUFvQkosRUFBTWpDLFFBQzdDQyxFQUFjdUMsR0FBbUJBLEVBQWlCaEosYUFBYSxzQkFBNkIsR0FDbEdMLFFBQVFDLElBQUksU0FDWixNQUFNaUYsR0FBWSxJQUFJQyxNQUFPQyxjQUM3QnBGLFFBQVFDLElBQUlpRixHQUNaLE1BQU12RCxFQUFXeUcsZ0JBQWdCVSxFQUFNakMsUUFDdkM3RyxRQUFRQyxJQUFJLG9CQUNadUksa0JBQWtCdEQsR0FDbEJsRixRQUFRQyxJQUFJLGtCQUNaMEcsbUJBQW1CLFFBQVNtQyxFQUFNakMsT0FBUTNCLEVBQVd2RCxFQUFVbUYsRUFBYSxJQUM1RTlHLFFBQVFDLElBQUksTUFDaEIsQ0FDQSxNQUFPK0gsR0FDSGhJLFFBQVFnSSxNQUFNLHFDQUFzQ0EsRUFDeEQsS0FnQkp0SixTQUFTZ0ssaUJBQWlCLG9CQUFvQixLQUVoQmhLLFNBQVNpQyxpQkFBaUIsaUVBQXBELE1BQ00ySSxFQUFlNUssU0FBU0ssY0FBYyw4QkFDdEN3SyxFQUFpQjdLLFNBQVNLLGNBQWMscURBQ3hDeUssRUFBMEI5SyxTQUFTSyxjQUFjLHlDQUV2RCxDQUFDdUssRUFBY0MsR0FBZ0IzSSxTQUFRNkksSUFDL0JBLEdBQ0FBLEVBQU9mLGlCQUFpQixTQUFTLElBQU0vRSxlQUFVLE9BQVEsT0FBUSxHQUFRLFlBQ3JFLElBQUkrRixFQUFJQyxFQUFJQyxFQUFJQyxFQUFJQyxFQUNwQixJQUNJLE1BQU1DLEVBQWMsQ0FDaEJDLE9BQTZHLFFBQXBHTCxFQUFpRCxRQUEzQ0QsRUFBS2hMLFNBQVNLLGNBQWMsaUJBQThCLElBQVAySyxPQUFnQixFQUFTQSxFQUFHMUssaUJBQThCLElBQVAySyxPQUFnQixFQUFTQSxFQUFHckssU0FBVyxHQUM1SjJLLE9BQTZLLFFBQXBLSixFQUFpSCxRQUEzR0QsRUFBS2xMLFNBQVNLLGNBQWMsaUZBQThGLElBQVA2SyxPQUFnQixFQUFTQSxFQUFHNUssaUJBQThCLElBQVA2SyxPQUFnQixFQUFTQSxFQUFHdkssU0FBVyxHQUM1TjRLLE1BQXVELFFBQS9DSixFQUFLcEwsU0FBU0ssY0FBYyxxQkFBa0MsSUFBUCtLLE9BQWdCLEVBQVNBLEVBQUd2SixRQUFVLEdBQ3JHRyxRQUFTLENBQUMsR0FHS3lKLE1BQU1DLEtBQUsxTCxTQUFTaUMsaUJBQWlCLG1FQUM3Q0MsU0FBUXlKLElBQ2YsSUFBSVgsRUFBSUMsRUFBSUMsRUFDWixNQUFNVSxHQUFxSCxRQUEzR1gsRUFBd0QsUUFBbERELEVBQUtXLEVBQUl0TCxjQUFjLDZCQUEwQyxJQUFQMkssT0FBZ0IsRUFBU0EsRUFBRzFLLGlCQUE4QixJQUFQMkssT0FBZ0IsRUFBU0EsRUFBR3RLLFFBQVEsS0FBTSxNQUFRLEdBQy9La0IsR0FBd0QsUUFBOUNxSixFQUFLUyxFQUFJdEwsY0FBYyx5QkFBc0MsSUFBUDZLLE9BQWdCLEVBQVNBLEVBQUc1SyxZQUFjLEdBQzVHc0wsR0FBUy9KLElBQ1R3SixFQUFZckosUUFBUTRKLEdBQVMvSixFQUNqQyxJQUVKUCxRQUFRQyxJQUFJLEdBQUd3SixFQUFPaEQsNkJBQThCc0QsR0FHcEQsTUFBTVEsU0FEYXRELE9BQU9DLFFBQVFDLE1BQU05RCxJQUFJLENBQUVrSCxhQUFjLE1BQ2hDQSxjQUFnQixHQUM1Q0EsRUFBYWhFLEtBQUssQ0FDZDlHLEtBQU1zSyxFQUFZQyxNQUNsQkMsTUFBT08sV0FBV1QsRUFBWUUsTUFBTTVLLFFBQVEsV0FBWSxLQUN4RDZLLEtBQU1ILEVBQVlHLEtBQ2xCeEosUUFBU3FKLEVBQVlySixnQkFFbkJ1RyxPQUFPQyxRQUFRQyxNQUFNRSxJQUFJLENBQUVrRCxnQkFDckMsQ0FDQSxNQUFPdkMsR0FDSGhJLFFBQVFnSSxNQUFNLG1CQUFtQnlCLEVBQU9oRCxtQkFBb0J1QixFQUNoRSxDQUNKLEtBQ0osSUFvQ0F3QixHQUNBQSxFQUF3QmQsaUJBQWlCLFNBQVVJLEdBQVVuRixlQUFVLE9BQVEsT0FBUSxHQUFRLFlBQzNGLElBQUkrRixFQUFJQyxFQUFJQyxFQUNaLElBQ0ksTUFBTWEsRUFBZ0IsR0FDaEJDLEVBQVlQLE1BQU1DLEtBQUsxTCxTQUFTaUMsaUJBQWlCLHVCQUNsRGdLLFFBQU9DLEdBQW9CLG1CQUFaQSxFQUFLbkUsS0FDekIsSUFBSyxNQUFNbUUsS0FBUUYsRUFBVyxDQUMxQixNQUFNRyxFQUFXRCxFQUFLN0wsY0FBYywwQkFDcEMsR0FBSThMLEdBQVlBLEVBQVNySyxRQUFTLENBQzlCLE1BQU1zSyxFQUFjRixFQUFLN0wsY0FBYyxnREFDdkMsR0FBSStMLEVBQWEsQ0FDYixNQUFNQyxFQUFrQkQsRUFBWS9MLGNBQWMsb0JBQzVDVSxHQUFpSCxRQUF4R2lLLEVBQUtxQixhQUF5RCxFQUFTQSxFQUFnQjlMLG1CQUFnQyxJQUFQeUssT0FBZ0IsRUFBU0EsRUFBR3BLLFNBQVcsR0FFaEs0SyxHQUF5RCxRQUFoRFAsR0FERm1CLEVBQVl6SyxhQUFhLFNBQVcsSUFDeEIySyxNQUFNLGtDQUErQyxJQUFQckIsT0FBZ0IsRUFBU0EsRUFBRyxLQUFPLEdBQ3BHc0IsRUFBZUwsRUFBSzdMLGNBQWMscUNBQ2xDa0wsRUFBUWdCLEVBQ1ZULFlBQWdELFFBQW5DWixFQUFLcUIsRUFBYWhNLG1CQUFnQyxJQUFQMkssT0FBZ0IsRUFBU0EsRUFBR3ZLLFFBQVEsV0FBWSxNQUFRLEtBQU8sRUFDckhxQixFQUFVLENBQUMsRUFDU2tLLEVBQUtqSyxpQkFBaUIseUJBQzlCQyxTQUFRc0ssSUFDdEIsSUFBSXhCLEVBQUlDLEVBQUlDLEVBQUlDLEVBQ2hCLE1BQU1TLEdBQXVILFFBQTdHWCxFQUF3RCxRQUFsREQsRUFBS3dCLEVBQVVuTSxjQUFjLHVCQUFvQyxJQUFQMkssT0FBZ0IsRUFBU0EsRUFBR3pLLG1CQUFnQyxJQUFQMEssT0FBZ0IsRUFBU0EsRUFBR3JLLE9BQU9ELFFBQVEsSUFBSyxNQUFRLEdBQ3ZMa0IsR0FBMEksUUFBaElzSixFQUEyRSxRQUFyRUQsRUFBS3NCLEVBQVVuTSxjQUFjLDBDQUF1RCxJQUFQNkssT0FBZ0IsRUFBU0EsRUFBRzNLLG1CQUFnQyxJQUFQNEssT0FBZ0IsRUFBU0EsRUFBR3ZLLFNBQVcsR0FDM0xnTCxHQUFTL0osSUFDVEcsRUFBUTRKLEdBQVMvSixFQUNyQixJQUVKa0ssRUFBY2xFLEtBQUssQ0FDZjlHLE9BQ0F5SyxPQUNBRCxRQUNBdkosV0FFUixDQUNKLENBQ0osQ0FDQSxHQUFJK0osRUFBY2hKLE9BQVMsRUFBRyxDQUUxQixNQUNNMEosVUFGYWxFLE9BQU9DLFFBQVFDLE1BQU05RCxJQUFJLENBQUVrSCxhQUFjLE1BQ2hDQSxjQUFnQixJQUNIYSxPQUFPWCxTQUMxQ3hELE9BQU9DLFFBQVFDLE1BQU1FLElBQUksQ0FBRWtELGFBQWNZLElBQy9DbkwsUUFBUUMsSUFBSSw4QkFBK0J3SyxFQUMvQyxDQUNKLENBQ0EsTUFBT3pDLEdBQ0hoSSxRQUFRZ0ksTUFBTSx1Q0FBd0NBLEVBQzFELENBQ0osS0FDSixJQUVKZixPQUFPSyxRQUFRK0QsVUFBVUMsYUFBWSxDQUFDQyxFQUFTQyxFQUFRQyxLQUM1QixZQUFuQkYsRUFBUXhELFFBRVIwRCxFQUFhLENBQUVDLEtBREtoTixTQUFTd0gsZ0JBQWdCUSxhQUcxQyxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9zcmMvdXRpbHMvZWxlbWVudC1wcm9jZXNzb3IudHMiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9zcmMvY29udGVudF9zY3JpcHQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NFbGVtZW50KGVsZW1lbnQsIHJlY2lwZSwgcGFyZW50TmFtZSA9IFwiXCIsIG50aENoaWxkID0gMCkge1xuICAgIC8vIENyZWF0ZSBhIG5ldyBlbGVtZW50IHVzaW5nIHRoZSBET00gQVBJXG4gICAgbGV0IHRhZ05hbWUgPSByZWNpcGUudGFnX25hbWUgfHwgZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgLy8gSGFuZGxlIHVuZGVyc2NvcmVkIHRhZ3NcbiAgICBpZiAodGFnTmFtZS5lbmRzV2l0aChcIl9cIikpIHtcbiAgICAgICAgdGFnTmFtZSA9IHRhZ05hbWUuc2xpY2UoMCwgLTEpO1xuICAgIH1cbiAgICBjb25zdCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgICAvLyBFeHRyYWN0IHRleHQgY29udGVudCBiYXNlZCBvbiB0aGUgcmVjaXBlXG4gICAgbGV0IGVsZW1lbnRUZXh0ID0gXCJcIjtcbiAgICBpZiAocmVjaXBlLnRleHRfc2VsZWN0b3IpIHtcbiAgICAgICAgY29uc3QgdGV4dEVsZW1lbnQgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IocmVjaXBlLnRleHRfc2VsZWN0b3IpO1xuICAgICAgICBpZiAodGV4dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnRUZXh0ID0gdGV4dEVsZW1lbnQuaW5uZXJUZXh0IHx8IHRleHRFbGVtZW50LnRleHRDb250ZW50IHx8IFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocmVjaXBlLnRleHRfanMpIHtcbiAgICAgICAgZWxlbWVudFRleHQgPSBldmFsKHJlY2lwZS50ZXh0X2pzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVjaXBlLmFkZF90ZXh0KSB7XG4gICAgICAgIGVsZW1lbnRUZXh0ID0gZWxlbWVudC5pbm5lclRleHQgfHwgZWxlbWVudC50ZXh0Q29udGVudCB8fCBcIlwiO1xuICAgIH1cbiAgICBlbGVtZW50VGV4dCA9IGVsZW1lbnRUZXh0LnJlcGxhY2UoL1xccysvZywgXCIgXCIpLnRyaW0oKTtcbiAgICBpZiAocmVjaXBlLnRleHRfZm9ybWF0ICYmIGVsZW1lbnRUZXh0KSB7XG4gICAgICAgIGVsZW1lbnRUZXh0ID0gcmVjaXBlLnRleHRfZm9ybWF0LnJlcGxhY2UoXCJ7fVwiLCBlbGVtZW50VGV4dCk7XG4gICAgfVxuICAgIGlmIChlbGVtZW50VGV4dCAmJiByZWNpcGUuYWRkX3RleHQpIHtcbiAgICAgICAgbmV3RWxlbWVudC50ZXh0Q29udGVudCA9IGVsZW1lbnRUZXh0O1xuICAgIH1cbiAgICAvLyBCdWlsZCB0aGUgbm9kZSBhdHRyaWJ1dGVzXG4gICAgbGV0IGVsZW1lbnROYW1lID0gXCJcIjtcbiAgICBpZiAocmVjaXBlLm5hbWUpIHtcbiAgICAgICAgaWYgKHJlY2lwZS5uYW1lID09PSBcImZyb21fdGV4dFwiKSB7XG4gICAgICAgICAgICBlbGVtZW50TmFtZSA9IHBhcmVudE5hbWUgPyBwYXJlbnROYW1lICsgXCIuXCIgOiBcIlwiO1xuICAgICAgICAgICAgZWxlbWVudE5hbWUgKz0gZWxlbWVudFRleHQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXlxcd10rL2csIFwiX1wiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZWNpcGUubmFtZSA9PT0gXCJmcm9tX250aF9jaGlsZFwiKSB7XG4gICAgICAgICAgICBlbGVtZW50TmFtZSA9IHBhcmVudE5hbWUgPyBwYXJlbnROYW1lICsgXCIuXCIgOiBcIlwiO1xuICAgICAgICAgICAgZWxlbWVudE5hbWUgKz0gbnRoQ2hpbGQudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnROYW1lID0gcGFyZW50TmFtZSA/IHBhcmVudE5hbWUgKyBcIi5cIiA6IFwiXCI7XG4gICAgICAgICAgICBlbGVtZW50TmFtZSArPSByZWNpcGUubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBuZXdFbGVtZW50LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgZWxlbWVudE5hbWUpO1xuICAgICAgICBwYXJlbnROYW1lID0gZWxlbWVudE5hbWU7XG4gICAgfVxuICAgIC8vIEhhbmRsZSBjbGlja2FibGVzIGFuZCBpbnB1dHNcbiAgICBpZiAocmVjaXBlLmNsaWNrYWJsZSkge1xuICAgICAgICBpZiAoIXJlY2lwZS5uYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjbGlja2FibGUgZWxlbWVudCBtdXN0IGhhdmUgYSBuYW1lXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGhhbmRsZSBjbGlja19zZWxlY3RvclxuICAgICAgICBsZXQgY2xpY2tfZWxlbWVudDtcbiAgICAgICAgaWYgKHJlY2lwZS5jbGlja19zZWxlY3Rvcikge1xuICAgICAgICAgICAgY2xpY2tfZWxlbWVudCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihyZWNpcGUuY2xpY2tfc2VsZWN0b3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xpY2tfZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsaWNrX2VsZW1lbnQpIHtcbiAgICAgICAgICAgIGNsaWNrX2VsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1jbGlja2FibGUtaWRcIiwgZWxlbWVudE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrLWVsZW1lbnQgbm90IGZvdW5kJywgZWxlbWVudCwgcmVjaXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXdpbmRvdy5jbGlja2FibGVfcmVjaXBlcykge1xuICAgICAgICAgICAgd2luZG93LmNsaWNrYWJsZV9yZWNpcGVzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93LmNsaWNrYWJsZV9yZWNpcGVzW2VsZW1lbnROYW1lXSA9IHJlY2lwZTtcbiAgICB9XG4gICAgaWYgKHRhZ05hbWUgPT09IFwiaW5wdXRcIikge1xuICAgICAgICBjb25zdCBpbnB1dFR5cGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInR5cGVcIik7XG4gICAgICAgIGlmIChbXCJ0ZXh0XCIsIFwibnVtYmVyXCJdLmluY2x1ZGVzKGlucHV0VHlwZSkpIHtcbiAgICAgICAgICAgIG5ld0VsZW1lbnQuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtaW5wdXQtaWRcIiwgZWxlbWVudE5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlucHV0VHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgICBuZXdFbGVtZW50LnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIiwgZWxlbWVudC5jaGVja2VkLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlucHV0VHlwZSA9PT0gXCJyYWRpb1wiKSB7XG4gICAgICAgICAgICBuZXdFbGVtZW50LnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIiwgZWxlbWVudC5jaGVja2VkLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNsaWNrYWJsZS1pZFwiLCBlbGVtZW50TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF3aW5kb3cuaW5wdXRfcmVjaXBlcykge1xuICAgICAgICAgICAgd2luZG93LmlucHV0X3JlY2lwZXMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cuaW5wdXRfcmVjaXBlc1tlbGVtZW50TmFtZV0gPSByZWNpcGU7XG4gICAgfVxuICAgIC8vICoqSGFuZGxlIHNlbGVjdCBlbGVtZW50cyoqXG4gICAgaWYgKHRhZ05hbWUgPT09IFwic2VsZWN0XCIpIHtcbiAgICAgICAgLy8gVGFnIHRoZSBzZWxlY3QgZWxlbWVudCB3aXRoIGRhdGEtc2VsZWN0LWlkXG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zZWxlY3QtaWRcIiwgZWxlbWVudE5hbWUpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdvcHRpb24nKTtcbiAgICAgICAgb3B0aW9ucy5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gb3B0aW9uLmdldEF0dHJpYnV0ZSgndmFsdWUnKSB8fCBvcHRpb24udGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uTmFtZSA9IGVsZW1lbnROYW1lICsgXCIuXCIgKyBvcHRpb25WYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IG5ld09wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICAgICAgbmV3T3B0aW9uLnRleHRDb250ZW50ID0gb3B0aW9uLnRleHRDb250ZW50O1xuICAgICAgICAgICAgbmV3T3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBvcHRpb25WYWx1ZSk7XG4gICAgICAgICAgICBuZXdPcHRpb24uc2V0QXR0cmlidXRlKCduYW1lJywgb3B0aW9uTmFtZSk7XG4gICAgICAgICAgICBuZXdPcHRpb24uc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsIG9wdGlvbi5zZWxlY3RlZC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2xpY2thYmxlLWlkJywgb3B0aW9uTmFtZSk7IC8vIFRhZyBhY3R1YWwgRE9NIG9wdGlvbiBlbGVtZW50XG4gICAgICAgICAgICBuZXdFbGVtZW50LmFwcGVuZENoaWxkKG5ld09wdGlvbik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDb3B5IHNwZWNpZmllZCBhdHRyaWJ1dGVzXG4gICAgY29uc3QgYXR0cnNUb0NvcHkgPSBbXCJhbHRcIiwgXCJ0aXRsZVwiLCBcInR5cGVcIiwgXCJ2YWx1ZVwiLCBcInJvbGVcIiwgXCJhcmlhLWxhYmVsXCIsIFwiYXJpYS1oaWRkZW5cIiwgXCJhcmlhLXNlbGVjdGVkXCJdO1xuICAgIGF0dHJzVG9Db3B5LmZvckVhY2goKGF0dHIpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBuZXdFbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAocmVjaXBlLmtlZXBfYXR0cikge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZWNpcGUua2VlcF9hdHRyKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGtleSk7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBuZXdFbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVjaXBlWydjbGFzcyddKSB7XG4gICAgICAgIG5ld0VsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsIHJlY2lwZVsnY2xhc3MnXSk7XG4gICAgfVxuICAgIGlmIChyZWNpcGVbJ2lkJ10pIHtcbiAgICAgICAgbmV3RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lkJywgcmVjaXBlWydpZCddKTtcbiAgICB9XG4gICAgLy8gT3ZlcnJpZGUgYXR0cmlidXRlcyBpZiBzcGVjaWZpZWRcbiAgICBpZiAocmVjaXBlLm92ZXJyaWRlX2F0dHIpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVjaXBlLm92ZXJyaWRlX2F0dHIpIHtcbiAgICAgICAgICAgIG5ld0VsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgZXZhbChyZWNpcGUub3ZlcnJpZGVfYXR0cltrZXldKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUHJvY2VzcyBjaGlsZHJlblxuICAgIGlmIChyZWNpcGUuY2hpbGRyZW4gJiYgcmVjaXBlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZFJlY2lwZSBvZiByZWNpcGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gY2hpbGRSZWNpcGUuZGlyZWN0X2NoaWxkID8gYDpzY29wZSA+ICR7Y2hpbGRSZWNpcGUuc2VsZWN0b3J9YCA6IGNoaWxkUmVjaXBlLnNlbGVjdG9yO1xuICAgICAgICAgICAgY29uc3QgY2hpbGRFbGVtZW50cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgICAgICAgICBjaGlsZEVsZW1lbnRzLmZvckVhY2goKGNoaWxkRWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZE5vZGUgPSBwcm9jZXNzRWxlbWVudChjaGlsZEVsZW1lbnQsIGNoaWxkUmVjaXBlLCBwYXJlbnROYW1lLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgbmV3RWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZE5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZFJlY2lwZS5pbnNlcnRfc3BsaXRfbWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZXJ5ID0gY2hpbGRSZWNpcGUuaW5zZXJ0X3NwbGl0X21hcmtlcl9ldmVyeSB8fCAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggJSBldmVyeSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxpdE1hcmtlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwbGl0LW1hcmtlcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3RWxlbWVudC5hcHBlbmRDaGlsZChzcGxpdE1hcmtlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImluc2VydGluZyBzcGxpdCBtYXJrZXIgMVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRSZWNpcGUuaW5zZXJ0X3NwbGl0X21hcmtlcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImluc2VydGluZyBzcGxpdCBtYXJrZXIgMlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BsaXRNYXJrZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGxpdC1tYXJrZXInKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3RWxlbWVudC5hcHBlbmRDaGlsZChzcGxpdE1hcmtlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vIHNwbGl0IG1hcmtlclwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBIYW5kbGUgZW1wdHkgbWVzc2FnZXNcbiAgICBpZiAocmVjaXBlLmVtcHR5X21lc3NhZ2UgJiYgbmV3RWxlbWVudC5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc3QgZW1wdHlUZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJlY2lwZS5lbXB0eV9tZXNzYWdlKTtcbiAgICAgICAgbmV3RWxlbWVudC5hcHBlbmRDaGlsZChlbXB0eVRleHROb2RlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0VsZW1lbnQ7XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgcHJvY2Vzc0VsZW1lbnQgfSBmcm9tICcuL3V0aWxzL2VsZW1lbnQtcHJvY2Vzc29yJztcbmxldCBsYXN0U2Nyb2xsVGltZSA9IDA7IC8vIFRyYWNrIGxhc3Qgc2Nyb2xsIHRpbWVzdGFtcFxuY29uc3QgU0NST0xMX1RIUkVTSE9MRCA9IDE1MDA7IC8vIE1pbmltdW0gdGltZSBpbiBtcyBiZXR3ZWVuIHNjcmVlbnNob3RzIGZvciBzY3JvbGwgYWN0aW9uc1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgIGNvbnNvbGUubG9nKCdET01Db250ZW50TG9hZGVkJyk7XG4gICAgY29uc3QgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdnZXRSZWNpcGUnLFxuICAgICAgICAgICAgICAgIHVybDogdXJsXG4gICAgICAgICAgICB9LCByZXNvbHZlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZScpO1xuICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UucmVjaXBlKSB7XG4gICAgICAgICAgICBjb25zdCByZWNpcGUgPSByZXNwb25zZS5yZWNpcGU7XG4gICAgICAgICAgICBjb25zdCByb290RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocmVjaXBlLnNlbGVjdG9yKTtcbiAgICAgICAgICAgIGlmIChyb290RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Jvb3QgPSBwcm9jZXNzRWxlbWVudChyb290RWxlbWVudCwgcmVjaXBlKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdSb290Lm91dGVySFRNTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluaXRpYWxpemluZyBjbGlja2FibGUgZWxlbWVudHM6JywgZXJyb3IpO1xuICAgIH1cbiAgICAvLyB0cnl7XG4gICAgLy8gICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAvLyAgICAgY2FwdHVyZVNjcmVlbnNob3QodGltZXN0YW1wKTtcbiAgICAvLyAgICAgY2FwdHVyZUludGVyYWN0aW9uKCduYXZpZ2F0ZScsICcnLHRpbWVzdGFtcCwnJywnJyx1cmwpO1xuICAgIC8vIH1jYXRjaChlcnJvcil7XG4gICAgLy8gICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhcHR1cmluZyBzY3JlZW5zaG90OicsIGVycm9yKTtcbiAgICAvLyB9XG59KSk7XG5mdW5jdGlvbiBnZW5lcmF0ZUh0bWxTbmFwc2hvdElkKCkge1xuICAgIGNvbnN0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICByZXR1cm4gYGh0bWxfJHtoYXNoQ29kZSh1cmwpfV8ke3RpbWVzdGFtcH1gO1xufVxuZnVuY3Rpb24gaGFzaENvZGUoc3RyKSB7XG4gICAgbGV0IGhhc2ggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBoYXNoIHw9IDA7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiSGFzaCB2YWx1ZSBiZWZvcmUgcmV0dXJuOlwiLCBoYXNoKTtcbiAgICByZXR1cm4gaGFzaC50b1N0cmluZygpO1xufVxuLy8gRnVuY3Rpb24gdG8gZ2V0IGNsaWNrYWJsZSBlbGVtZW50cyBpbiB0aGUgdmlld3BvcnRcbmZ1bmN0aW9uIGdldENsaWNrYWJsZUVsZW1lbnRzSW5WaWV3cG9ydCgpIHtcbiAgICBjb25zdCBjbGlja2FibGVFbGVtZW50cyA9IFtdOyAvLyBBcnJheSB0byBzdG9yZSBjbGlja2FibGUgZWxlbWVudHNcbiAgICAvLyBTZWxlY3QgYWxsIHBvdGVudGlhbCBjbGlja2FibGUgZWxlbWVudHNcbiAgICBjb25zdCBhbGxFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EsIGJ1dHRvbiwgW29uY2xpY2tdLCBpbnB1dFt0eXBlPVwiYnV0dG9uXCJdLCBpbnB1dFt0eXBlPVwic3VibWl0XCJdJyk7XG4gICAgLy8gQ2hlY2sgaWYgZWFjaCBlbGVtZW50IGlzIGluIHRoZSB2aWV3cG9ydFxuICAgIGFsbEVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChyZWN0LnRvcCA+PSAwICYmXG4gICAgICAgICAgICByZWN0LmxlZnQgPj0gMCAmJlxuICAgICAgICAgICAgcmVjdC5ib3R0b20gPD0gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSAmJlxuICAgICAgICAgICAgcmVjdC5yaWdodCA8PSAod2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKSkge1xuICAgICAgICAgICAgY2xpY2thYmxlRWxlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgdGFnTmFtZTogZWxlbWVudC50YWdOYW1lLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZWxlbWVudC5jbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgaWQ6IGVsZW1lbnQuaWQsXG4gICAgICAgICAgICAgICAgaW5uZXJUZXh0OiBlbGVtZW50LmlubmVyVGV4dC50cmltKCksXG4gICAgICAgICAgICAgICAgb3V0ZXJIVE1MOiBlbGVtZW50Lm91dGVySFRNTC50cmltKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjbGlja2FibGVFbGVtZW50cztcbn1cbi8vIEZ1bmN0aW9uIHRvIGNhcHR1cmUgaW50ZXJhY3Rpb25zXG5mdW5jdGlvbiBjYXB0dXJlSW50ZXJhY3Rpb24oZXZlbnRUeXBlLCB0YXJnZXQsIHRpbWVzdGFtcCwgc2VsZWN0b3IsIGNsaWNrYWJsZUlkLCB1cmwpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gR2VuZXJhdGUgbmV3IEhUTUwgc25hcHNob3QgSURcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTbmFwc2hvdElkID0gZ2VuZXJhdGVIdG1sU25hcHNob3RJZCgpO1xuICAgICAgICAgICAgLy8gU2F2ZSBIVE1MIHNuYXBzaG90IGFuZCB3YWl0IGZvciBpdCB0byBjb21wbGV0ZVxuICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldChbJ2h0bWxTbmFwc2hvdHMnXSwgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBodG1sU25hcHNob3RzID0gcmVzdWx0Lmh0bWxTbmFwc2hvdHMgfHwge307XG4gICAgICAgICAgICAgICAgICAgIGh0bWxTbmFwc2hvdHNbY3VycmVudFNuYXBzaG90SWRdID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTDtcbiAgICAgICAgICAgICAgICAgICAgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgaHRtbFNuYXBzaG90cyB9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZvaWQgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBjb25zdCBjbGlja2FibGVFbGVtZW50cyA9IGdldENsaWNrYWJsZUVsZW1lbnRzSW5WaWV3cG9ydCgpO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICBldmVudFR5cGUsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgICAgICAgICAgdGFyZ2V0T3V0ZXJIVE1MOiB0YXJnZXQub3V0ZXJIVE1MLFxuICAgICAgICAgICAgICAgIHRhcmdldENsYXNzOiB0YXJnZXQuY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIHRhcmdldElkOiB0YXJnZXQuaWQsXG4gICAgICAgICAgICAgICAgdGFyZ2V0VGV4dDogdGFyZ2V0LmlubmVyVGV4dCB8fCB0YXJnZXQudmFsdWUgfHwgJycsXG4gICAgICAgICAgICAgICAgaHRtbFNuYXBzaG90SWQ6IGN1cnJlbnRTbmFwc2hvdElkLFxuICAgICAgICAgICAgICAgIC8vIGNsaWNrYWJsZUVsZW1lbnRzOiBjbGlja2FibGVFbGVtZW50cyxcbiAgICAgICAgICAgICAgICBzZWxlY3Rvcjogc2VsZWN0b3IgfHwgJycsXG4gICAgICAgICAgICAgICAgY2xpY2thYmxlSWQ6IGNsaWNrYWJsZUlkIHx8ICcnLFxuICAgICAgICAgICAgICAgIHVybDogdXJsIHx8ICcnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHlpZWxkIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHsgYWN0aW9uOiAnc2F2ZURhdGEnLCBkYXRhIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZHVyaW5nICR7ZXZlbnRUeXBlfSBldmVudCBoYW5kbGluZzpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8vIENhcHR1cmUgc2Nyb2xsIGludGVyYWN0aW9uc1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKGV2ZW50KSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGlmIChjdXJyZW50VGltZSAtIGxhc3RTY3JvbGxUaW1lID49IFNDUk9MTF9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgIGxhc3RTY3JvbGxUaW1lID0gY3VycmVudFRpbWU7XG4gICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICB5aWVsZCBjYXB0dXJlSW50ZXJhY3Rpb24oJ3Njcm9sbCcsIGV2ZW50LnRhcmdldCwgdGltZXN0YW1wLCAnJywgJycsICcnKTtcbiAgICAgICAgICAgIHlpZWxkIGNhcHR1cmVTY3JlZW5zaG90KHRpbWVzdGFtcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBzY3JvbGwgZXZlbnQgaGFuZGxpbmc6JywgZXJyb3IpO1xuICAgIH1cbn0pKTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIChldmVudCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgIGlmICh0YXJnZXQgJiZcbiAgICAgICAgKCh0YXJnZXQudGFnTmFtZSA9PT0gXCJJTlBVVFwiICYmIHRhcmdldC50eXBlID09PSBcInRleHRcIikgfHxcbiAgICAgICAgICAgIHRhcmdldC50YWdOYW1lID09PSBcIlRFWFRBUkVBXCIpKSB7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgeWllbGQgY2FwdHVyZVNjcmVlbnNob3QodGltZXN0YW1wKTtcbiAgICAgICAgeWllbGQgY2FwdHVyZUludGVyYWN0aW9uKFwiaW5wdXRcIiwgdGFyZ2V0LCB0aW1lc3RhbXAsICcnLCAnJywgJycpO1xuICAgIH1cbn0pLCB0cnVlKTtcbi8vIENhcHR1cmUgY2xpY2sgaW50ZXJhY3Rpb25zXG5mdW5jdGlvbiBnZXRVbmlxdWVTZWxlY3RvcihlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQuaWQpIHtcbiAgICAgICAgcmV0dXJuIGAjJHtlbGVtZW50LmlkfWA7XG4gICAgfVxuICAgIGlmIChlbGVtZW50LmNsYXNzTmFtZSkge1xuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS50cmltKCkuc3BsaXQoL1xccysvKS5qb2luKCcuJyk7XG4gICAgICAgIHJldHVybiBgJHtlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKX0uJHtjbGFzc05hbWV9YDtcbiAgICB9XG4gICAgcmV0dXJuIGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xufVxuZnVuY3Rpb24gZ2V0RnVsbFNlbGVjdG9yKGVsZW1lbnQpIHtcbiAgICBsZXQgcGF0aCA9IFtdO1xuICAgIHdoaWxlIChlbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgcGF0aC51bnNoaWZ0KGdldFVuaXF1ZVNlbGVjdG9yKGVsZW1lbnQpKTtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGguam9pbignID4gJyk7XG59XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmRDbGlja2FibGVQYXJlbnQoZWxlbWVudCwgZGVwdGggPSAwKSB7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQgfHwgZGVwdGggPj0gMilcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1jbGlja2FibGUtaWQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZpbmRDbGlja2FibGVQYXJlbnQoZWxlbWVudC5wYXJlbnRFbGVtZW50LCBkZXB0aCArIDEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsaWNrYWJsZUVsZW1lbnQgPSBmaW5kQ2xpY2thYmxlUGFyZW50KGV2ZW50LnRhcmdldCk7XG4gICAgICAgIGNvbnN0IGNsaWNrYWJsZUlkID0gY2xpY2thYmxlRWxlbWVudCA/IGNsaWNrYWJsZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNsaWNrYWJsZS1pZCcpIHx8ICcnIDogJyc7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjbGljaycpO1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRpbWVzdGFtcCk7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gZ2V0RnVsbFNlbGVjdG9yKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzcmFydCBzY3JlZW5zaG90Jyk7XG4gICAgICAgIGNhcHR1cmVTY3JlZW5zaG90KHRpbWVzdGFtcCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlbmQgc2NyZWVuc2hvdCcpO1xuICAgICAgICBjYXB0dXJlSW50ZXJhY3Rpb24oJ2NsaWNrJywgZXZlbnQudGFyZ2V0LCB0aW1lc3RhbXAsIHNlbGVjdG9yLCBjbGlja2FibGVJZCwgJycpO1xuICAgICAgICBjb25zb2xlLmxvZygnZW5kJyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgY2xpY2sgZXZlbnQgaGFuZGxpbmc6JywgZXJyb3IpO1xuICAgIH1cbn0pO1xuLy8gRnVuY3Rpb24gdG8gY2FwdHVyZSBzY3JlZW5zaG90cyB3aXRoIHVuaXF1ZSBJRFxuZnVuY3Rpb24gY2FwdHVyZVNjcmVlbnNob3QodGltZXN0YW1wKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIHNjcmVlbnNob3QgSURcbiAgICAgICAgICAgIGNvbnN0IHNjcmVlbnNob3RJZCA9IGBzY3JlZW5zaG90XyR7dGltZXN0YW1wfWA7XG4gICAgICAgICAgICAvLyBDYXB0dXJlIHRoZSBzY3JlZW5zaG90XG4gICAgICAgICAgICB5aWVsZCBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7IGFjdGlvbjogJ2NhcHR1cmVTY3JlZW5zaG90Jywgc2NyZWVuc2hvdElkIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2FwdHVyaW5nIHNjcmVlbnNob3Q6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gICAgLy8gSGFuZGxlIGFsbCB0eXBlcyBvZiBvcmRlciBidXR0b25zXG4gICAgY29uc3QgcGxhY2VPcmRlckJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtpZD1cInBsYWNlT3JkZXJcIl0sIGlucHV0W2lkPVwidHVyYm8tY2hlY2tvdXQtcHlvLWJ1dHRvblwiXScpO1xuICAgIGNvbnN0IGJ1eU5vd0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W2lkPVwiYnV5LW5vdy1idXR0b25cIl0nKTtcbiAgICBjb25zdCBzZXR1cE5vd0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltpZD1cInJjeC1zdWJzY3JpYmUtc3VibWl0LWJ1dHRvbi1hbm5vdW5jZVwiXScpO1xuICAgIGNvbnN0IHByb2NlZWRUb0NoZWNrb3V0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInByb2NlZWRUb1JldGFpbENoZWNrb3V0XCJdJyk7XG4gICAgLy8gSGFuZGxlIEJ1eSBOb3cgYW5kIFNldCBVcCBOb3cgYnV0dG9ucyBpZiBwcmVzZW50XG4gICAgW2J1eU5vd0J1dHRvbiwgc2V0dXBOb3dCdXR0b25dLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgICAgaWYgKGJ1dHRvbikge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2R1Y3RJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICgoX2IgPSAoX2EgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5uZXJUZXh0KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudHJpbSgpKSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6ICgoX2QgPSAoX2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic3Bhbi5hLXByaWNlLmFvay1hbGlnbi1jZW50ZXIucmVpbnZlbnRQcmljZVByaWNlVG9QYXlNYXJnaW4ucHJpY2VUb1BheVwiKSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmlubmVyVGV4dCkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnRyaW0oKSkgfHwgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzaW46ICgoX2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXQjQVNJTlwiKSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnZhbHVlKSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge31cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IGFsbCBvcHRpb24gc2VsZWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25Sb3dzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI3R3aXN0ZXIgZGl2LmEtcm93OmhhcyhsYWJlbC5hLWZvcm0tbGFiZWwpOmhhcyhzcGFuLnNlbGVjdGlvbilcIikpO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25Sb3dzLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSAoKF9iID0gKF9hID0gcm93LnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbC5hLWZvcm0tbGFiZWxcIikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbm5lclRleHQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5yZXBsYWNlKFwiOiBcIiwgXCJcIikpIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9ICgoX2MgPSByb3cucXVlcnlTZWxlY3RvcihcInNwYW4uc2VsZWN0aW9uXCIpKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuaW5uZXJUZXh0KSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhYmVsICYmIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdEluZm8ub3B0aW9uc1tsYWJlbF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke2J1dHRvbi5pZH0gY2xpY2tlZCAtIFByb2R1Y3QgSW5mbzpgLCBwcm9kdWN0SW5mbyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFN0b3JlIHRoZSBwcm9kdWN0IGluZm9cbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHlpZWxkIGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldCh7IG9yZGVyRGV0YWlsczogW10gfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IHJlc3VsdC5vcmRlckRldGFpbHMgfHwgW107XG4gICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb2R1Y3RJbmZvLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHBhcnNlRmxvYXQocHJvZHVjdEluZm8ucHJpY2UucmVwbGFjZSgvW14wLTkuXS9nLCAnJykpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXNpbjogcHJvZHVjdEluZm8uYXNpbixcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHByb2R1Y3RJbmZvLm9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7IG9yZGVyRGV0YWlscyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNhcHR1cmluZyAke2J1dHRvbi5pZH0gcHJvZHVjdCBpbmZvOmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBPcmlnaW5hbCBQbGFjZSBPcmRlciBidXR0b24gaGFuZGxpbmdcbiAgICAvLyBpZiAocGxhY2VPcmRlckJ1dHRvbnMubGVuZ3RoID4gMCkge1xuICAgIC8vICAgICAvLyBnZXQgYWxsIHByb2R1Y3QgaW5mb3JtYXRpb24sIGZpbHRlciBvdXQgaW50ZXJmZXJlbmNlIGl0ZW1zXG4gICAgLy8gICAgIGNvbnN0IGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxpbmVpdGVtLXRpdGxlLXRleHQnKTtcbiAgICAvLyAgICAgY29uc3Qgb3JkZXJEZXRhaWxzOiBPcmRlckRldGFpbFtdID0gW107XG4gICAgLy8gICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAvLyAgICAgICAgIC8vIGZpbHRlciBvdXQgaW50ZXJmZXJlbmNlIGl0ZW1zXG4gICAgLy8gICAgICAgICBpZiAoaXRlbS5tYXRjaGVzKCcuYS1zaXplLWJhc2UubGluZWl0ZW0tdGl0bGUtdGV4dCcpKSB7XG4gICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coXCJTa2lwcGluZyBpbnRlcmZlcmluZyBlbGVtZW50OlwiLCAoaXRlbSBhcyBIVE1MRWxlbWVudCkuaW5uZXJUZXh0KTtcbiAgICAvLyAgICAgICAgICAgICByZXR1cm47XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgICAgICAvLyBnZXQgcHJvZHVjdCBuYW1lXG4gICAgLy8gICAgICAgICBjb25zdCBwcm9kdWN0TmFtZSA9IChpdGVtIGFzIEhUTUxFbGVtZW50KS5pbm5lclRleHQudHJpbSgpO1xuICAgIC8vICAgICAgICAgLy8gZ2V0IHByb2R1Y3QgcHJpY2VcbiAgICAvLyAgICAgICAgIGNvbnN0IHByaWNlRWxlbWVudCA9IGl0ZW0uY2xvc2VzdCgnZGl2Jyk/LnF1ZXJ5U2VsZWN0b3IoJy5saW5laXRlbS1wcmljZS10ZXh0Jyk7XG4gICAgLy8gICAgICAgICBjb25zdCBwcm9kdWN0UHJpY2UgPSBwcmljZUVsZW1lbnQgJiYgKHByaWNlRWxlbWVudCBhcyBIVE1MRWxlbWVudCkuaW5uZXJUZXh0XG4gICAgLy8gICAgICAgICAgICAgPyAocHJpY2VFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5pbm5lclRleHQudHJpbSgpLnJlcGxhY2UoJyQnLCAnJylcbiAgICAvLyAgICAgICAgICAgICA6ICcwLjAwJztcbiAgICAvLyAgICAgICAgIG9yZGVyRGV0YWlscy5wdXNoKHtcbiAgICAvLyAgICAgICAgICAgICBuYW1lOiBwcm9kdWN0TmFtZSxcbiAgICAvLyAgICAgICAgICAgICBwcmljZTogcGFyc2VGbG9hdChwcm9kdWN0UHJpY2UpLFxuICAgIC8vICAgICAgICAgfSk7XG4gICAgLy8gICAgIH0pO1xuICAgIC8vICAgICAvLyBhZGQgbGlzdGVuZXIgdG8gZWFjaCBidXR0b25cbiAgICAvLyAgICAgcGxhY2VPcmRlckJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgLy8gICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jKGV2ZW50KSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coXCJQbGFjZSBZb3VyIE9yZGVyIGJ1dHRvbiBjbGlja2VkIVwiKTtcbiAgICAvLyAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KHtvcmRlckRldGFpbHM6W119KTtcbiAgICAvLyAgICAgICAgICAgICByZXN1bHQ9cmVzdWx0Lm9yZGVyRGV0YWlsc3x8W11cbiAgICAvLyAgICAgICAgICAgICBsZXQgc3RvcmVPcmRlckRldGFpbHMgPSByZXN1bHQuY29uY2F0KG9yZGVyRGV0YWlscyk7XG4gICAgLy8gICAgICAgICAgICAgYXdhaXQgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgb3JkZXJEZXRhaWxzOnN0b3JlT3JkZXJEZXRhaWxzIH0pO1xuICAgIC8vICAgICAgICAgfSk7XG4gICAgLy8gICAgIH0pO1xuICAgIC8vIH1cbiAgICBpZiAocHJvY2VlZFRvQ2hlY2tvdXRCdXR0b24pIHtcbiAgICAgICAgcHJvY2VlZFRvQ2hlY2tvdXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtcyA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhcnRJdGVtcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2lkXj1cInNjLWFjdGl2ZS1cIl0nKSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0uaWQgIT09ICdzYy1hY3RpdmUtY2FydCcpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjYXJ0SXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tib3ggJiYgY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZHVjdExpbmsgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zYy1pdGVtLXByb2R1Y3QtdGl0bGUtY29udCAuc2MtcHJvZHVjdC1saW5rJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvZHVjdExpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmdWxsTmFtZUVsZW1lbnQgPSBwcm9kdWN0TGluay5xdWVyeVNlbGVjdG9yKCcuYS10cnVuY2F0ZS1mdWxsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9ICgoX2EgPSBmdWxsTmFtZUVsZW1lbnQgPT09IG51bGwgfHwgZnVsbE5hbWVFbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmdWxsTmFtZUVsZW1lbnQudGV4dENvbnRlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50cmltKCkpIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhyZWYgPSBwcm9kdWN0TGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhc2luID0gKChfYiA9IGhyZWYubWF0Y2goL3Byb2R1Y3RcXC8oW0EtWjAtOV17MTB9KS8pKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbMV0pIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaWNlRWxlbWVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnNjLWl0ZW0tcHJpY2UtYmxvY2sgLmEtb2Zmc2NyZWVuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJpY2UgPSBwcmljZUVsZW1lbnQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KCgoX2MgPSBwcmljZUVsZW1lbnQudGV4dENvbnRlbnQpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5yZXBsYWNlKC9bXjAtOS5dL2csICcnKSkgfHwgJzAnKSA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhcmlhdGlvbkVsZW1lbnRzID0gaXRlbS5xdWVyeVNlbGVjdG9yQWxsKCcuc2MtcHJvZHVjdC12YXJpYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYXRpb25FbGVtZW50cy5mb3JFYWNoKHZhcmlhdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSAoKF9iID0gKF9hID0gdmFyaWF0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5hLXRleHQtYm9sZCcpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudGV4dENvbnRlbnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50cmltKCkucmVwbGFjZSgnOicsICcnKSkgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gKChfZCA9IChfYyA9IHZhcmlhdGlvbi5xdWVyeVNlbGVjdG9yKCcuYS1zaXplLXNtYWxsOm5vdCguYS10ZXh0LWJvbGQpJykpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50ZXh0Q29udGVudCkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnRyaW0oKSkgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbCAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1tsYWJlbF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0geWllbGQgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KHsgb3JkZXJEZXRhaWxzOiBbXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JkZXJEZXRhaWxzID0gcmVzdWx0Lm9yZGVyRGV0YWlscyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZE9yZGVyRGV0YWlscyA9IG9yZGVyRGV0YWlscy5jb25jYXQoc2VsZWN0ZWRJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7IG9yZGVyRGV0YWlsczogdXBkYXRlZE9yZGVyRGV0YWlscyB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N0b3JlZCBzZWxlY3RlZCBjYXJ0IGl0ZW1zOicsIHNlbGVjdGVkSXRlbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhcHR1cmluZyBzZWxlY3RlZCBjYXJ0IGl0ZW1zOicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbn0pO1xuY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKChtZXNzYWdlLCBzZW5kZXIsIHNlbmRSZXNwb25zZSkgPT4ge1xuICAgIGlmIChtZXNzYWdlLmFjdGlvbiA9PT0gJ2dldEhUTUwnKSB7XG4gICAgICAgIGNvbnN0IGh0bWxDb250ZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTDtcbiAgICAgICAgc2VuZFJlc3BvbnNlKHsgaHRtbDogaHRtbENvbnRlbnQgfSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufSk7XG4iXSwibmFtZXMiOlsicHJvY2Vzc0VsZW1lbnQiLCJlbGVtZW50IiwicmVjaXBlIiwicGFyZW50TmFtZSIsIm50aENoaWxkIiwidGFnTmFtZSIsInRhZ19uYW1lIiwidG9Mb3dlckNhc2UiLCJlbmRzV2l0aCIsInNsaWNlIiwibmV3RWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImVsZW1lbnRUZXh0IiwidGV4dF9zZWxlY3RvciIsInRleHRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVyVGV4dCIsInRleHRDb250ZW50IiwidGV4dF9qcyIsImV2YWwiLCJhZGRfdGV4dCIsInJlcGxhY2UiLCJ0cmltIiwidGV4dF9mb3JtYXQiLCJlbGVtZW50TmFtZSIsIm5hbWUiLCJ0b1N0cmluZyIsInNldEF0dHJpYnV0ZSIsImNsaWNrYWJsZSIsIkVycm9yIiwiY2xpY2tfZWxlbWVudCIsImNsaWNrX3NlbGVjdG9yIiwiY29uc29sZSIsImxvZyIsIndpbmRvdyIsImNsaWNrYWJsZV9yZWNpcGVzIiwiaW5wdXRUeXBlIiwiZ2V0QXR0cmlidXRlIiwiaW5jbHVkZXMiLCJ2YWx1ZSIsImNoZWNrZWQiLCJpbnB1dF9yZWNpcGVzIiwib3B0aW9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwib3B0aW9uIiwib3B0aW9uVmFsdWUiLCJvcHRpb25OYW1lIiwibmV3T3B0aW9uIiwic2VsZWN0ZWQiLCJhcHBlbmRDaGlsZCIsImF0dHJzVG9Db3B5IiwiYXR0ciIsImtlZXBfYXR0ciIsImtleSIsIm92ZXJyaWRlX2F0dHIiLCJjaGlsZHJlbiIsImxlbmd0aCIsImNoaWxkUmVjaXBlIiwic2VsZWN0b3IiLCJkaXJlY3RfY2hpbGQiLCJjaGlsZEVsZW1lbnRzIiwiY2hpbGRFbGVtZW50IiwiaW5kZXgiLCJjaGlsZE5vZGUiLCJpbnNlcnRfc3BsaXRfbWFya2VyIiwiaW5zZXJ0X3NwbGl0X21hcmtlcl9ldmVyeSIsInNwbGl0TWFya2VyIiwiZW1wdHlfbWVzc2FnZSIsImVtcHR5VGV4dE5vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwibGFzdFNjcm9sbFRpbWUiLCJTQ1JPTExfVEhSRVNIT0xEIiwiZ2VuZXJhdGVIdG1sU25hcHNob3RJZCIsInVybCIsImxvY2F0aW9uIiwiaHJlZiIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImhhc2hDb2RlIiwic3RyIiwiaGFzaCIsImkiLCJjaGFyQ29kZUF0IiwiZ2V0Q2xpY2thYmxlRWxlbWVudHNJblZpZXdwb3J0IiwiY2xpY2thYmxlRWxlbWVudHMiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwibGVmdCIsImJvdHRvbSIsImlubmVySGVpZ2h0IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwicmlnaHQiLCJpbm5lcldpZHRoIiwiY2xpZW50V2lkdGgiLCJwdXNoIiwiY2xhc3NOYW1lIiwiaWQiLCJvdXRlckhUTUwiLCJjYXB0dXJlSW50ZXJhY3Rpb24iLCJldmVudFR5cGUiLCJ0YXJnZXQiLCJjbGlja2FibGVJZCIsInRoaXMiLCJjdXJyZW50U25hcHNob3RJZCIsImNocm9tZSIsInN0b3JhZ2UiLCJsb2NhbCIsImh0bWxTbmFwc2hvdHMiLCJzZXQiLCJydW50aW1lIiwibGFzdEVycm9yIiwiZGF0YSIsInRhcmdldE91dGVySFRNTCIsInRhcmdldENsYXNzIiwidGFyZ2V0SWQiLCJ0YXJnZXRUZXh0IiwiaHRtbFNuYXBzaG90SWQiLCJzZW5kTWVzc2FnZSIsImFjdGlvbiIsImVycm9yIiwiZ2V0VW5pcXVlU2VsZWN0b3IiLCJzcGxpdCIsImpvaW4iLCJnZXRGdWxsU2VsZWN0b3IiLCJwYXRoIiwicGFyZW50RWxlbWVudCIsInVuc2hpZnQiLCJjYXB0dXJlU2NyZWVuc2hvdCIsInNjcmVlbnNob3RJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZXNwb25zZSIsInJvb3RFbGVtZW50IiwibmV3Um9vdCIsImV2ZW50IiwiY3VycmVudFRpbWUiLCJub3ciLCJ0eXBlIiwiZmluZENsaWNrYWJsZVBhcmVudCIsImRlcHRoIiwiaGFzQXR0cmlidXRlIiwiY2xpY2thYmxlRWxlbWVudCIsImJ1eU5vd0J1dHRvbiIsInNldHVwTm93QnV0dG9uIiwicHJvY2VlZFRvQ2hlY2tvdXRCdXR0b24iLCJidXR0b24iLCJfYSIsIl9iIiwiX2MiLCJfZCIsIl9lIiwicHJvZHVjdEluZm8iLCJ0aXRsZSIsInByaWNlIiwiYXNpbiIsIkFycmF5IiwiZnJvbSIsInJvdyIsImxhYmVsIiwib3JkZXJEZXRhaWxzIiwicGFyc2VGbG9hdCIsInNlbGVjdGVkSXRlbXMiLCJjYXJ0SXRlbXMiLCJmaWx0ZXIiLCJpdGVtIiwiY2hlY2tib3giLCJwcm9kdWN0TGluayIsImZ1bGxOYW1lRWxlbWVudCIsIm1hdGNoIiwicHJpY2VFbGVtZW50IiwidmFyaWF0aW9uIiwidXBkYXRlZE9yZGVyRGV0YWlscyIsImNvbmNhdCIsIm9uTWVzc2FnZSIsImFkZExpc3RlbmVyIiwibWVzc2FnZSIsInNlbmRlciIsInNlbmRSZXNwb25zZSIsImh0bWwiXSwic291cmNlUm9vdCI6IiJ9