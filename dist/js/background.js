(()=>{"use strict";const e={selector:"#nav-search-bar-form",children:[{selector:"input#twotabsearchtextbox",name:"search_input"},{selector:"#nav-search-submit-button",clickable:!0,name:"search_button"}]},t=[{match:"/",match_method:"url",selector:"html",children:[{selector:"head",children:[{selector:"title",add_text:!0}]},{selector:"body",children:[e]}]},{match:"/s",match_method:"url",selector:"html",children:[{selector:"head",children:[{selector:"title",add_text:!0}]},{selector:"body",children:[e,{selector:"#s-refinements",name:"refinements",children:[{selector:"div.a-section.a-spacing-none:not(:has(#n-title)):has(span.a-size-base.a-color-base.puis-bold-weight-text):has(ul span.a-declarative > span > li):not(#reviewsRefinements):not(#departments):not(#priceRefinements):not(#filters)",name:"from_text",text_selector:"span.a-size-base.a-color-base.puis-bold-weight-text",children:[{selector:"span.a-size-base.a-color-base.puis-bold-weight-text",add_text:!0,class:"refinement-title"},{selector:"ul:nth-of-type(1) > span.a-declarative > span > li",add_text:!0,name:"from_text",clickable:!0,click_selector:"a",direct_child:!0,children:[{selector:"input[type='checkbox']"}]}]},{selector:"#departments",name:"departments",children:[{selector:"li a",add_text:!0,name:"from_text",clickable:!0}]},{selector:"#reviewsRefinements",name:"reviews_refinements",children:[{selector:"li a",add_text:!0,name:"from_text",clickable:!0}]}]},{selector:"div.s-main-slot.s-result-list.s-search-results",name:"search_results",children:[{insert_split_marker:!0,insert_split_marker_every:4,selector:'div[data-component-type="s-search-result"]',text_selector:"span.a-size-base-plus.a-color-base.a-text-normal",name:"from_text",class:"search-result",children:[{selector:"div[data-cy='title-recipe'] a",add_text:!0,class:"product-name",clickable:!0,name:"view_product"},{selector:"div[data-cy='reviews-block']",class:"product-review",children:[{selector:"span.a-icon-alt",add_text:!0,class:"product-rating"},{selector:"span.a-size-base.s-underline-text",add_text:!0,text_format:"{} reviews",class:"product-rating-count"}]},{selector:"div[data-cy='price-recipe']",class:"product-price",children:[{selector:"a.a-link-normal > span.a-price > span.a-offscreen",add_text:!0}]},{selector:"div[data-cy='delivery-recipe']",add_text:!0,class:"product-delivery"}]}]},{selector:"span.s-pagination-strip",name:"pagination",children:[{selector:".s-pagination-item",add_text:!0,name:"from_text",clickable:!0}]}]}]},{match:"#productTitle",match_text:"",selector:"html",terminate:"return !!arguments[0]",terminate_callback:"return arguments[0]",children:[{selector:"head",children:[{selector:"title",add_text:!0}]},{selector:"body",children:[e,{selector:"#centerCol",class:"product-card",children:[{selector:"#title",add_text:!0,keep_attr:["id"]},{selector:"#averageCustomerReviews",class:"review",children:[{selector:"span.a-icon-alt",add_text:!0},{selector:"#acrCustomerReviewText",add_text:!0}]},{selector:"#apex_desktop_newAccordionRow #corePriceDisplay_desktop_feature_div span.a-price.aok-align-center.reinventPricePriceToPayMargin.priceToPay",add_text:!0,text_format:"Price: {}",class:"product-price"},{selector:"#twister",class:"product-options",children:[{selector:"div.a-row:has(label.a-form-label):has(span.selection)",children:[{selector:"label.a-form-label",add_text:!0},{selector:"span.selection",add_text:!0}]}]}]},{selector:"#addToCart:has(#buy-now-button)",name:"add_to_cart",children:[{selector:"#productFactsDesktopExpander",add_text:!0,class:"product-facts"},{selector:"div.mir-layout-DELIVERY_BLOCK-slot-PRIMARY_DELIVERY_MESSAGE_LARGE",add_text:!0,class:"product-delivery"},{selector:"#buy-now-button",add_text:!0,clickable:!0,name:"buy_now",class:"product-buy-now",before_hook:'\nconst title = document.querySelector("#title").innerText\nconst price = document.querySelector("span.a-price.aok-align-center.reinventPricePriceToPayMargin.priceToPay").innerText\nconst options = Array.from(document.querySelectorAll("#twister div.a-row:has(label.a-form-label):has(span.selection)")).map(a => ({label: a.querySelector("label.a-form-label").innerText, value: a.querySelector("span.selection").innerText}))\nconst options_dict = {}\nfor (const option of options) {\n    options_dict[option["label"].replace(": ", "")] = option["value"]\n}\nconst asin = document.querySelector("input#ASIN").value\nconsole.log({title, price, options: options_dict, asin})\nreturn {title, price, options: options_dict, asin}\n'}]}]}]},{match:"/ap/signin",match_method:"url",terminate:"return !!arguments[0]",terminate_callback:"return arguments[0]",selector:"html"}];var o=function(e,t,o,r){return new(o||(o=Promise))((function(a,n){function c(e){try{l(r.next(e))}catch(e){n(e)}}function s(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,s)}l((r=r.apply(e,t||[])).next())}))};chrome.webNavigation.onCommitted.addListener((e=>{0===e.frameId&&chrome.scripting.executeScript({target:{tabId:e.tabId},files:["js/injected.js"],world:"MAIN"})}),{url:[{urlMatches:".*"}]});let r="http://userdatacollect.hailab.io/upload",a=[],n=[],c=0;const s={};function l(e,t){return o(this,void 0,void 0,(function*(){if(e){if(n.push([e,t]),n.length>100){let e=yield chrome.storage.local.get({screenshots:[]});e=e.screenshots||[];const t=e.concat(n);n.length=0,yield chrome.storage.local.set({screenshots:t})}return!0}return!1}))}function i(e){let t=0;for(let o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t|=0;return console.log("Hash value before return:",t),t.toString()}chrome.runtime.onMessage.addListener(((e,s,i)=>(o(void 0,void 0,void 0,(function*(){var d;try{if("saveData"===e.action){if(console.log("saveData ",e.data.eventType),c++,console.log(c),e.data.actionSequenceId=c,a.push(e.data),a.length>100){let e=yield chrome.storage.local.get({interactions:[]});e=e.interactions||[];let t=e.concat(a);a.length=0,yield chrome.storage.local.set({interactions:t})}i({success:!0})}if("captureScreenshot"===e.action){console.log("get screenshot request");const t=yield function(){return o(this,void 0,void 0,(function*(){try{const[e]=yield chrome.tabs.query({active:!0,currentWindow:!0});if(e)return yield chrome.tabs.captureVisibleTab(e.windowId,{format:"jpeg",quality:25})}catch(e){console.error("Error capturing screenshot:",e)}return null}))}();if(t){const o=yield l(t,e.screenshotId);i({success:o,message:o?void 0:"Failed to capture screenshot"})}else i({success:!1,message:"Failed to capture screenshot"})}if("downloadData"===e.action)try{console.log("downloadData");const e=yield function(){return o(this,void 0,void 0,(function*(){try{const e=(new Date).toISOString().replace(/[:.]/g,"-"),t=`DATA/SESSION_${e}`,o=(yield chrome.storage.local.get({userId:""})).userId,c=yield chrome.storage.local.get({htmlSnapshots:[]}),s=yield chrome.storage.local.get({interactions:[]}),l=yield chrome.storage.local.get({orderDetails:[]}),i=yield chrome.storage.local.get({screenshots:[]});console.log("snapshots",c.htmlSnapshots.length),console.log("interact",s),console.log("orderDetails",l),console.log("screen",i.screenshots.length);let d=c.htmlSnapshots||{},h=s.interactions||[],u=l.orderDetails||[],m=i.screenshots||[];h=h.concat(a),m=m.concat(n);const p={htmlSnapshots:d,interactions:h,orderDetails:u},g=new Blob([`Session data for timestamp: ${e}, user id: ${o} \n order details: \n ${JSON.stringify(u)}`],{type:"text/plain"}),f=new FormData;f.append("file",g,`${t}/session_info.txt`),console.log("uploading session info"),yield fetch(r,{method:"POST",body:f});const b=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),y=new FormData;console.log("uploading interactions"),y.append("file",b,`${t}/interactions.json`),yield fetch(r,{method:"POST",body:y});for(const[e,o]of m){const a=yield fetch(e),n=yield a.blob(),c=new FormData;c.append("file",n,`${t}/${o.replace(/[:.]/g,"-")}.jpg`),console.log("uploading screenshots"),yield fetch(r,{method:"POST",body:c})}return chrome.storage.local.remove(["htmlSnapshots","interactions","orderDetails","screenshots"]),a.length=0,n.length=0,!0}catch(e){return console.error("Error uploading data:",e),!1}}))}();i({success:e})}catch(e){console.error("Error handling download:",e),i({success:!1,error:e.message})}if("clearMemoryCache"===e.action&&(a=[],n=[],c=0,i({success:!0})),"getRecipe"===e.action&&(null===(d=s.tab)||void 0===d?void 0:d.id))return function(e,r){return o(this,void 0,void 0,(function*(){const o=new URL(r).pathname;for(const r of t){const t=r.match_method||"text";if("text"===t)try{const[{result:t}]=yield chrome.scripting.executeScript({target:{tabId:e},func:(e,t)=>{var o,r;const a=document.querySelector(e);return a&&(!t||null!==(r=null===(o=a.textContent)||void 0===o?void 0:o.toLowerCase().includes(t.toLowerCase()))&&void 0!==r&&r)},args:[r.match,r.match_text||""]});if(t)return r}catch(e){console.error("Error checking text match:",e)}else if("url"===t&&r.match===o)return r}throw new Error(`No matching recipe found for path: ${o}`)}))}(s.tab.id,e.url).then((e=>{i({recipe:e})})).catch((e=>{i({error:e.message})})),!0}catch(e){console.error("Error handling message:",e),i({success:!1,error:e.message})}})),!0))),chrome.tabs.onActivated.addListener((e=>o(void 0,void 0,void 0,(function*(){try{const t=e.tabId,r=yield chrome.tabs.get(t);if(!r)return void console.error(`Failed to get tab with ID: ${t}`);if(console.log(`Switched to tab ${t} with URL: ${r.url}`),r.url&&r.url.includes("amazon.com")){const e=(new Date).toISOString(),n=`html_${i(r.url)}_${e}`;chrome.tabs.sendMessage(t,{action:"getHTML"},(t=>o(void 0,void 0,void 0,(function*(){const o=null==t?void 0:t.html,s=(yield chrome.storage.local.get({htmlSnapshots:{}})).htmlSnapshots||{};s[n]=o,yield chrome.storage.local.set({htmlSnapshots:s}),c++;const i={eventType:"tabActivate",timestamp:e,target_url:r.url,htmlSnapshotId:n,actionSequenceId:c};if(a.push(i),a.length>100){let e=yield chrome.storage.local.get({interactions:[]});e=e.interactions||[];let t=e.concat(a);a.length=0,yield chrome.storage.local.set({interactions:t})}const d=yield chrome.tabs.captureVisibleTab(r.windowId,{format:"jpeg",quality:25}),h=`screenshot_${e}`;yield l(d,h)}))))}}catch(e){console.error("Error in tab activate handler:",e)}})))),chrome.webNavigation.onCommitted.addListener((e=>o(void 0,void 0,void 0,(function*(){if(0===e.frameId&&(console.log("webNavigation onCommitted event triggered:",e),e.url.includes("amazon.com"))){const t=function(e,t){s[e]||(s[e]={backStack:[],forwardStack:[],currentUrl:null});const o=s[e];return o.currentUrl?o.currentUrl===t?"reload":o.backStack.length>0&&o.backStack[o.backStack.length-1]===t?(o.forwardStack.push(o.currentUrl),o.currentUrl=o.backStack.pop(),"back"):o.forwardStack.length>0&&o.forwardStack[o.forwardStack.length-1]===t?(o.backStack.push(o.currentUrl),o.currentUrl=o.forwardStack.pop(),"forward"):(o.backStack.push(o.currentUrl),o.forwardStack=[],o.currentUrl=t,"new"):(o.currentUrl=t,"new")}(e.tabId,e.url);console.log(`Navigation type: ${t} for tab ${e.tabId} to ${e.url}`),chrome.scripting.executeScript({target:{tabId:e.tabId},func:()=>document.documentElement.outerHTML},(r=>o(void 0,void 0,void 0,(function*(){if(r&&r[0]&&r[0].result){const o=r[0].result,n=(new Date).toISOString(),s=`html_${i(e.url)}_${n}`,d=(yield chrome.storage.local.get({htmlSnapshots:{}})).htmlSnapshots||{};d[s]=o,yield chrome.storage.local.set({htmlSnapshots:d}),c++;const h={eventType:"navigation",navigationType:t,timestamp:n,target_url:e.url,htmlSnapshotId:s,actionSequenceId:c};if(a.push(h),a.length>100){let e=yield chrome.storage.local.get({interactions:[]});e=e.interactions||[];let t=e.concat(a);a.length=0,yield chrome.storage.local.set({interactions:t})}const u=yield chrome.tabs.get(e.tabId),m=yield chrome.tabs.captureVisibleTab(u.windowId,{format:"jpeg",quality:25}),p=`screenshot_${n}`;yield l(m,p)}}))))}})))),chrome.tabs.onRemoved.addListener((e=>{delete s[e]}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hyb21lLWV4dGVuc2lvbi10eXBlc2NyaXB0LXN0YXJ0ZXIvLi9zcmMvcmVjaXBlLnRzIiwid2VicGFjazovL2Nocm9tZS1leHRlbnNpb24tdHlwZXNjcmlwdC1zdGFydGVyLy4vc3JjL2JhY2tncm91bmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IG5hdiA9IHtcbiAgICBcInNlbGVjdG9yXCI6IFwiI25hdi1zZWFyY2gtYmFyLWZvcm1cIixcbiAgICBcImNoaWxkcmVuXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgICAgXCJzZWxlY3RvclwiOiBcImlucHV0I3R3b3RhYnNlYXJjaHRleHRib3hcIixcbiAgICAgICAgICAgIFwibmFtZVwiOiBcInNlYXJjaF9pbnB1dFwiLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBcInNlbGVjdG9yXCI6IFwiI25hdi1zZWFyY2gtc3VibWl0LWJ1dHRvblwiLFxuICAgICAgICAgICAgXCJjbGlja2FibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBcInNlYXJjaF9idXR0b25cIixcbiAgICAgICAgfSxcbiAgICBdLFxufTtcbmV4cG9ydCBjb25zdCByZWZpbmVtZW50X29wdGlvbiA9IFtcbiAgICB7XG4gICAgICAgIFwic2VsZWN0b3JcIjogXCJzcGFuLmEtc2l6ZS1iYXNlLmEtY29sb3ItYmFzZS5wdWlzLWJvbGQtd2VpZ2h0LXRleHRcIixcbiAgICAgICAgXCJhZGRfdGV4dFwiOiB0cnVlLFxuICAgICAgICBcImNsYXNzXCI6IFwicmVmaW5lbWVudC10aXRsZVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBcInNlbGVjdG9yXCI6IFwidWw6bnRoLW9mLXR5cGUoMSkgPiBzcGFuLmEtZGVjbGFyYXRpdmUgPiBzcGFuID4gbGlcIixcbiAgICAgICAgXCJhZGRfdGV4dFwiOiB0cnVlLFxuICAgICAgICBcIm5hbWVcIjogXCJmcm9tX3RleHRcIixcbiAgICAgICAgXCJjbGlja2FibGVcIjogdHJ1ZSxcbiAgICAgICAgXCJjbGlja19zZWxlY3RvclwiOiBcImFcIixcbiAgICAgICAgXCJkaXJlY3RfY2hpbGRcIjogdHJ1ZSxcbiAgICAgICAgXCJjaGlsZHJlblwiOiBbeyBcInNlbGVjdG9yXCI6IFwiaW5wdXRbdHlwZT0nY2hlY2tib3gnXVwiIH1dLFxuICAgIH0sXG5dO1xuZXhwb3J0IGNvbnN0IHJlY2lwZXMgPSBbXG4gICAge1xuICAgICAgICBcIm1hdGNoXCI6IFwiL1wiLFxuICAgICAgICBcIm1hdGNoX21ldGhvZFwiOiBcInVybFwiLFxuICAgICAgICBcInNlbGVjdG9yXCI6IFwiaHRtbFwiLFxuICAgICAgICBcImNoaWxkcmVuXCI6IFtcbiAgICAgICAgICAgIHsgXCJzZWxlY3RvclwiOiBcImhlYWRcIiwgXCJjaGlsZHJlblwiOiBbeyBcInNlbGVjdG9yXCI6IFwidGl0bGVcIiwgXCJhZGRfdGV4dFwiOiB0cnVlIH1dIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJzZWxlY3RvclwiOiBcImJvZHlcIixcbiAgICAgICAgICAgICAgICBcImNoaWxkcmVuXCI6IFtuYXZdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgXCJtYXRjaFwiOiBcIi9zXCIsXG4gICAgICAgIFwibWF0Y2hfbWV0aG9kXCI6IFwidXJsXCIsXG4gICAgICAgIFwic2VsZWN0b3JcIjogXCJodG1sXCIsXG4gICAgICAgIFwiY2hpbGRyZW5cIjogW1xuICAgICAgICAgICAgeyBcInNlbGVjdG9yXCI6IFwiaGVhZFwiLCBcImNoaWxkcmVuXCI6IFt7IFwic2VsZWN0b3JcIjogXCJ0aXRsZVwiLCBcImFkZF90ZXh0XCI6IHRydWUgfV0gfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcInNlbGVjdG9yXCI6IFwiYm9keVwiLFxuICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW1xuICAgICAgICAgICAgICAgICAgICBuYXYsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCIjcy1yZWZpbmVtZW50c1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwicmVmaW5lbWVudHNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZWxlY3RvclwiOiBcImRpdi5hLXNlY3Rpb24uYS1zcGFjaW5nLW5vbmU6bm90KDpoYXMoI24tdGl0bGUpKTpoYXMoc3Bhbi5hLXNpemUtYmFzZS5hLWNvbG9yLWJhc2UucHVpcy1ib2xkLXdlaWdodC10ZXh0KTpoYXModWwgc3Bhbi5hLWRlY2xhcmF0aXZlID4gc3BhbiA+IGxpKTpub3QoI3Jldmlld3NSZWZpbmVtZW50cyk6bm90KCNkZXBhcnRtZW50cyk6bm90KCNwcmljZVJlZmluZW1lbnRzKTpub3QoI2ZpbHRlcnMpXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcImZyb21fdGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRleHRfc2VsZWN0b3JcIjogXCJzcGFuLmEtc2l6ZS1iYXNlLmEtY29sb3ItYmFzZS5wdWlzLWJvbGQtd2VpZ2h0LXRleHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiByZWZpbmVtZW50X29wdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZWxlY3RvclwiOiBcIiNkZXBhcnRtZW50c1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJkZXBhcnRtZW50c1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNoaWxkcmVuXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNlbGVjdG9yXCI6IFwibGkgYVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWRkX3RleHRcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJmcm9tX3RleHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNsaWNrYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNlbGVjdG9yXCI6IFwiI3Jldmlld3NSZWZpbmVtZW50c1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJyZXZpZXdzX3JlZmluZW1lbnRzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCJsaSBhXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRfdGV4dFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcImZyb21fdGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xpY2thYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCJkaXYucy1tYWluLXNsb3Qucy1yZXN1bHQtbGlzdC5zLXNlYXJjaC1yZXN1bHRzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJzZWFyY2hfcmVzdWx0c1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImluc2VydF9zcGxpdF9tYXJrZXJcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbnNlcnRfc3BsaXRfbWFya2VyX2V2ZXJ5XCI6IDQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogJ2RpdltkYXRhLWNvbXBvbmVudC10eXBlPVwicy1zZWFyY2gtcmVzdWx0XCJdJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0ZXh0X3NlbGVjdG9yXCI6IFwic3Bhbi5hLXNpemUtYmFzZS1wbHVzLmEtY29sb3ItYmFzZS5hLXRleHQtbm9ybWFsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcImZyb21fdGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNsYXNzXCI6IFwic2VhcmNoLXJlc3VsdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNoaWxkcmVuXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNlbGVjdG9yXCI6IFwiZGl2W2RhdGEtY3k9J3RpdGxlLXJlY2lwZSddIGFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZF90ZXh0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcInByb2R1Y3QtbmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xpY2thYmxlXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwidmlld19wcm9kdWN0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCJkaXZbZGF0YS1jeT0ncmV2aWV3cy1ibG9jayddXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcInByb2R1Y3QtcmV2aWV3XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCJzcGFuLmEtaWNvbi1hbHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWRkX3RleHRcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwcm9kdWN0LXJhdGluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNlbGVjdG9yXCI6IFwic3Bhbi5hLXNpemUtYmFzZS5zLXVuZGVybGluZS10ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZF90ZXh0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRleHRfZm9ybWF0XCI6IFwie30gcmV2aWV3c1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcInByb2R1Y3QtcmF0aW5nLWNvdW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZWxlY3RvclwiOiBcImRpdltkYXRhLWN5PSdwcmljZS1yZWNpcGUnXVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwcm9kdWN0LXByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCJhLmEtbGluay1ub3JtYWwgPiBzcGFuLmEtcHJpY2UgPiBzcGFuLmEtb2Zmc2NyZWVuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZF90ZXh0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZWxlY3RvclwiOiBcImRpdltkYXRhLWN5PSdkZWxpdmVyeS1yZWNpcGUnXVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWRkX3RleHRcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNsYXNzXCI6IFwicHJvZHVjdC1kZWxpdmVyeVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInNlbGVjdG9yXCI6IFwic3Bhbi5zLXBhZ2luYXRpb24tc3RyaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcInBhZ2luYXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZWxlY3RvclwiOiBcIi5zLXBhZ2luYXRpb24taXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZF90ZXh0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcImZyb21fdGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNsaWNrYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIFwibWF0Y2hcIjogXCIjcHJvZHVjdFRpdGxlXCIsXG4gICAgICAgIFwibWF0Y2hfdGV4dFwiOiBcIlwiLFxuICAgICAgICBcInNlbGVjdG9yXCI6IFwiaHRtbFwiLFxuICAgICAgICBcInRlcm1pbmF0ZVwiOiBcInJldHVybiAhIWFyZ3VtZW50c1swXVwiLFxuICAgICAgICBcInRlcm1pbmF0ZV9jYWxsYmFja1wiOiBcInJldHVybiBhcmd1bWVudHNbMF1cIixcbiAgICAgICAgXCJjaGlsZHJlblwiOiBbXG4gICAgICAgICAgICB7IFwic2VsZWN0b3JcIjogXCJoZWFkXCIsIFwiY2hpbGRyZW5cIjogW3sgXCJzZWxlY3RvclwiOiBcInRpdGxlXCIsIFwiYWRkX3RleHRcIjogdHJ1ZSB9XSB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCJib2R5XCIsXG4gICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbXG4gICAgICAgICAgICAgICAgICAgIG5hdixcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJzZWxlY3RvclwiOiBcIiNjZW50ZXJDb2xcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwcm9kdWN0LWNhcmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZWxlY3RvclwiOiBcIiN0aXRsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZF90ZXh0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwia2VlcF9hdHRyXCI6IFtcImlkXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNlbGVjdG9yXCI6IFwiI2F2ZXJhZ2VDdXN0b21lclJldmlld3NcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcInJldmlld1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNoaWxkcmVuXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNlbGVjdG9yXCI6IFwic3Bhbi5hLWljb24tYWx0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRfdGV4dFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNlbGVjdG9yXCI6IFwiI2FjckN1c3RvbWVyUmV2aWV3VGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYWRkX3RleHRcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCIjYXBleF9kZXNrdG9wX25ld0FjY29yZGlvblJvdyAjY29yZVByaWNlRGlzcGxheV9kZXNrdG9wX2ZlYXR1cmVfZGl2IHNwYW4uYS1wcmljZS5hb2stYWxpZ24tY2VudGVyLnJlaW52ZW50UHJpY2VQcmljZVRvUGF5TWFyZ2luLnByaWNlVG9QYXlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRfdGV4dFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRleHRfZm9ybWF0XCI6IFwiUHJpY2U6IHt9XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwcm9kdWN0LXByaWNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCIjdHdpc3RlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNsYXNzXCI6IFwicHJvZHVjdC1vcHRpb25zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCJkaXYuYS1yb3c6aGFzKGxhYmVsLmEtZm9ybS1sYWJlbCk6aGFzKHNwYW4uc2VsZWN0aW9uKVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2hpbGRyZW5cIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNlbGVjdG9yXCI6IFwibGFiZWwuYS1mb3JtLWxhYmVsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZF90ZXh0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCJzcGFuLnNlbGVjdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRfdGV4dFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCIjYWRkVG9DYXJ0OmhhcygjYnV5LW5vdy1idXR0b24pXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJhZGRfdG9fY2FydFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGlsZHJlblwiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNlbGVjdG9yXCI6IFwiI3Byb2R1Y3RGYWN0c0Rlc2t0b3BFeHBhbmRlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZF90ZXh0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwcm9kdWN0LWZhY3RzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCJkaXYubWlyLWxheW91dC1ERUxJVkVSWV9CTE9DSy1zbG90LVBSSU1BUllfREVMSVZFUllfTUVTU0FHRV9MQVJHRVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImFkZF90ZXh0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwcm9kdWN0LWRlbGl2ZXJ5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic2VsZWN0b3JcIjogXCIjYnV5LW5vdy1idXR0b25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhZGRfdGV4dFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNsaWNrYWJsZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJidXlfbm93XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJwcm9kdWN0LWJ1eS1ub3dcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJiZWZvcmVfaG9va1wiOiBgXG5jb25zdCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGl0bGVcIikuaW5uZXJUZXh0XG5jb25zdCBwcmljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJzcGFuLmEtcHJpY2UuYW9rLWFsaWduLWNlbnRlci5yZWludmVudFByaWNlUHJpY2VUb1BheU1hcmdpbi5wcmljZVRvUGF5XCIpLmlubmVyVGV4dFxuY29uc3Qgb3B0aW9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiN0d2lzdGVyIGRpdi5hLXJvdzpoYXMobGFiZWwuYS1mb3JtLWxhYmVsKTpoYXMoc3Bhbi5zZWxlY3Rpb24pXCIpKS5tYXAoYSA9PiAoe2xhYmVsOiBhLnF1ZXJ5U2VsZWN0b3IoXCJsYWJlbC5hLWZvcm0tbGFiZWxcIikuaW5uZXJUZXh0LCB2YWx1ZTogYS5xdWVyeVNlbGVjdG9yKFwic3Bhbi5zZWxlY3Rpb25cIikuaW5uZXJUZXh0fSkpXG5jb25zdCBvcHRpb25zX2RpY3QgPSB7fVxuZm9yIChjb25zdCBvcHRpb24gb2Ygb3B0aW9ucykge1xuICAgIG9wdGlvbnNfZGljdFtvcHRpb25bXCJsYWJlbFwiXS5yZXBsYWNlKFwiOiBcIiwgXCJcIildID0gb3B0aW9uW1widmFsdWVcIl1cbn1cbmNvbnN0IGFzaW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXQjQVNJTlwiKS52YWx1ZVxuY29uc29sZS5sb2coe3RpdGxlLCBwcmljZSwgb3B0aW9uczogb3B0aW9uc19kaWN0LCBhc2lufSlcbnJldHVybiB7dGl0bGUsIHByaWNlLCBvcHRpb25zOiBvcHRpb25zX2RpY3QsIGFzaW59XG5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG4gICAge1xuICAgICAgICBcIm1hdGNoXCI6IFwiL2FwL3NpZ25pblwiLFxuICAgICAgICBcIm1hdGNoX21ldGhvZFwiOiBcInVybFwiLFxuICAgICAgICBcInRlcm1pbmF0ZVwiOiBcInJldHVybiAhIWFyZ3VtZW50c1swXVwiLFxuICAgICAgICBcInRlcm1pbmF0ZV9jYWxsYmFja1wiOiBcInJldHVybiBhcmd1bWVudHNbMF1cIixcbiAgICAgICAgXCJzZWxlY3RvclwiOiBcImh0bWxcIixcbiAgICB9LFxuXTtcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuLy8gQHRzLW5vY2hlY2tcbmNocm9tZS53ZWJOYXZpZ2F0aW9uLm9uQ29tbWl0dGVkLmFkZExpc3RlbmVyKChkZXRhaWxzKSA9PiB7XG4gICAgaWYgKGRldGFpbHMuZnJhbWVJZCA9PT0gMCkgeyAvLyBPbmx5IGluamVjdCBpbnRvIHRoZSBtYWluIGZyYW1lXG4gICAgICAgIGNocm9tZS5zY3JpcHRpbmcuZXhlY3V0ZVNjcmlwdCh7XG4gICAgICAgICAgICB0YXJnZXQ6IHsgdGFiSWQ6IGRldGFpbHMudGFiSWQgfSxcbiAgICAgICAgICAgIGZpbGVzOiBbXCJqcy9pbmplY3RlZC5qc1wiXSxcbiAgICAgICAgICAgIHdvcmxkOiBcIk1BSU5cIiAvLyBFbnN1cmVzIHRoZSBzY3JpcHQgaXMgaW5qZWN0ZWQgaW50byB0aGUgbWFpbiB3b3JsZFxuICAgICAgICB9KTtcbiAgICB9XG59LCB7IHVybDogW3sgdXJsTWF0Y2hlczogXCIuKlwiIH1dIH0pO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuLy8gQHRzLW5vY2hlY2tcbmltcG9ydCB7IHJlY2lwZXMgfSBmcm9tICcuL3JlY2lwZSc7XG5sZXQgdXBsb2FkX3VybCA9IFwiaHR0cDovL3VzZXJkYXRhY29sbGVjdC5oYWlsYWIuaW8vdXBsb2FkXCI7XG5sZXQgaW50ZXJhY3Rpb25zID0gW107XG5jb25zdCBpbnRlcmFjdGlvbnNMaW1pdCA9IDEwMDtcbmxldCBzY3JlZW5zaG90cyA9IFtdO1xuY29uc3Qgc2NyZWVuc2hvdExpbWl0ID0gMTAwO1xubGV0IGFjdGlvblNlcXVlbmNlSWQgPSAwO1xubGV0IHVwbG9hZFRpbWVyID0gbnVsbDtcbmxldCB1c2VySWQgPSBcIlwiO1xuY29uc3QgdGFiTmF2aWdhdGlvbkhpc3RvcnkgPSB7fTtcbmZ1bmN0aW9uIGFuYWx5emVOYXZpZ2F0aW9uKHRhYklkLCB1cmwpIHtcbiAgICBpZiAoIXRhYk5hdmlnYXRpb25IaXN0b3J5W3RhYklkXSkge1xuICAgICAgICB0YWJOYXZpZ2F0aW9uSGlzdG9yeVt0YWJJZF0gPSB7XG4gICAgICAgICAgICBiYWNrU3RhY2s6IFtdLFxuICAgICAgICAgICAgZm9yd2FyZFN0YWNrOiBbXSxcbiAgICAgICAgICAgIGN1cnJlbnRVcmw6IG51bGxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgaGlzdG9yeSA9IHRhYk5hdmlnYXRpb25IaXN0b3J5W3RhYklkXTtcbiAgICBpZiAoIWhpc3RvcnkuY3VycmVudFVybCkge1xuICAgICAgICBoaXN0b3J5LmN1cnJlbnRVcmwgPSB1cmw7XG4gICAgICAgIHJldHVybiAnbmV3JztcbiAgICB9XG4gICAgaWYgKGhpc3RvcnkuY3VycmVudFVybCA9PT0gdXJsKSB7XG4gICAgICAgIHJldHVybiAncmVsb2FkJztcbiAgICB9XG4gICAgaWYgKGhpc3RvcnkuYmFja1N0YWNrLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgaGlzdG9yeS5iYWNrU3RhY2tbaGlzdG9yeS5iYWNrU3RhY2subGVuZ3RoIC0gMV0gPT09IHVybCkge1xuICAgICAgICBoaXN0b3J5LmZvcndhcmRTdGFjay5wdXNoKGhpc3RvcnkuY3VycmVudFVybCk7XG4gICAgICAgIGhpc3RvcnkuY3VycmVudFVybCA9IGhpc3RvcnkuYmFja1N0YWNrLnBvcCgpO1xuICAgICAgICByZXR1cm4gJ2JhY2snO1xuICAgIH1cbiAgICBpZiAoaGlzdG9yeS5mb3J3YXJkU3RhY2subGVuZ3RoID4gMCAmJlxuICAgICAgICBoaXN0b3J5LmZvcndhcmRTdGFja1toaXN0b3J5LmZvcndhcmRTdGFjay5sZW5ndGggLSAxXSA9PT0gdXJsKSB7XG4gICAgICAgIGhpc3RvcnkuYmFja1N0YWNrLnB1c2goaGlzdG9yeS5jdXJyZW50VXJsKTtcbiAgICAgICAgaGlzdG9yeS5jdXJyZW50VXJsID0gaGlzdG9yeS5mb3J3YXJkU3RhY2sucG9wKCk7XG4gICAgICAgIHJldHVybiAnZm9yd2FyZCc7XG4gICAgfVxuICAgIGhpc3RvcnkuYmFja1N0YWNrLnB1c2goaGlzdG9yeS5jdXJyZW50VXJsKTtcbiAgICBoaXN0b3J5LmZvcndhcmRTdGFjayA9IFtdO1xuICAgIGhpc3RvcnkuY3VycmVudFVybCA9IHVybDtcbiAgICByZXR1cm4gJ25ldyc7XG59XG4vLyBBZGQgbmV3IGZ1bmN0aW9uIHRvIGhhbmRsZSBzY3JlZW5zaG90IHNhdmluZ1xuZnVuY3Rpb24gc2F2ZVNjcmVlbnNob3Qoc2NyZWVuc2hvdERhdGFVcmwsIHNjcmVlbnNob3RJZCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGlmIChzY3JlZW5zaG90RGF0YVVybCkge1xuICAgICAgICAgICAgc2NyZWVuc2hvdHMucHVzaChbc2NyZWVuc2hvdERhdGFVcmwsIHNjcmVlbnNob3RJZF0pO1xuICAgICAgICAgICAgaWYgKHNjcmVlbnNob3RzLmxlbmd0aCA+IHNjcmVlbnNob3RMaW1pdCkge1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSB5aWVsZCBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoeyBzY3JlZW5zaG90czogW10gfSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnNjcmVlbnNob3RzIHx8IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlU2NyZWVuc2hvdHMgPSByZXN1bHQuY29uY2F0KHNjcmVlbnNob3RzKTtcbiAgICAgICAgICAgICAgICBzY3JlZW5zaG90cy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgIHlpZWxkIGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7IHNjcmVlbnNob3RzOiBzdG9yZVNjcmVlbnNob3RzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xufVxuY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKChtZXNzYWdlLCBzZW5kZXIsIHNlbmRSZXNwb25zZSkgPT4ge1xuICAgICgoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYWN0aW9uID09PSAnc2F2ZURhdGEnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NhdmVEYXRhICcsIG1lc3NhZ2UuZGF0YS5ldmVudFR5cGUpO1xuICAgICAgICAgICAgICAgIGFjdGlvblNlcXVlbmNlSWQrKztcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhY3Rpb25TZXF1ZW5jZUlkKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEuYWN0aW9uU2VxdWVuY2VJZCA9IGFjdGlvblNlcXVlbmNlSWQ7XG4gICAgICAgICAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJhY3Rpb25zLmxlbmd0aCA+IGludGVyYWN0aW9uc0xpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSB5aWVsZCBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoeyBpbnRlcmFjdGlvbnM6IFtdIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuaW50ZXJhY3Rpb25zIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3RvcmVJbnRlcmFjdGlvbnMgPSByZXN1bHQuY29uY2F0KGludGVyYWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGludGVyYWN0aW9ucy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoeyBpbnRlcmFjdGlvbnM6IHN0b3JlSW50ZXJhY3Rpb25zIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UoeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2FwdHVyZSBzY3JlZW5zaG90IG9uIGRlbWFuZFxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYWN0aW9uID09PSAnY2FwdHVyZVNjcmVlbnNob3QnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldCBzY3JlZW5zaG90IHJlcXVlc3QnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzY3JlZW5zaG90RGF0YVVybCA9IHlpZWxkIGNhcHR1cmVTY3JlZW5zaG90KCk7XG4gICAgICAgICAgICAgICAgaWYgKHNjcmVlbnNob3REYXRhVXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSB5aWVsZCBzYXZlU2NyZWVuc2hvdChzY3JlZW5zaG90RGF0YVVybCwgbWVzc2FnZS5zY3JlZW5zaG90SWQpO1xuICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UoeyBzdWNjZXNzLCBtZXNzYWdlOiBzdWNjZXNzID8gdW5kZWZpbmVkIDogJ0ZhaWxlZCB0byBjYXB0dXJlIHNjcmVlbnNob3QnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdGYWlsZWQgdG8gY2FwdHVyZSBzY3JlZW5zaG90JyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEb3dubG9hZCBkYXRhIG9uIHVzZXIgcmVxdWVzdFxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYWN0aW9uID09PSAnZG93bmxvYWREYXRhJykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkb3dubG9hZERhdGEnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IHlpZWxkIHVwbG9hZERhdGFUb1NlcnZlcigpO1xuICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UoeyBzdWNjZXNzIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaGFuZGxpbmcgZG93bmxvYWQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UoeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYWN0aW9uID09PSAnY2xlYXJNZW1vcnlDYWNoZScpIHtcbiAgICAgICAgICAgICAgICBpbnRlcmFjdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICBzY3JlZW5zaG90cyA9IFtdO1xuICAgICAgICAgICAgICAgIGFjdGlvblNlcXVlbmNlSWQgPSAwO1xuICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZSh7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS5hY3Rpb24gPT09ICdnZXRSZWNpcGUnICYmICgoX2EgPSBzZW5kZXIudGFiKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWQpKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0UmVjaXBlKHNlbmRlci50YWIuaWQsIG1lc3NhZ2UudXJsKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVjaXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZSh7IHJlY2lwZTogcmVjaXBlIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEluZGljYXRlIHRoYXQgc2VuZFJlc3BvbnNlIHdpbGwgYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBjaHJvbWUuc3RvcmFnZS5sb2NhbC5jbGVhcigpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaGFuZGxpbmcgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICAgICAgICBzZW5kUmVzcG9uc2UoeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICAgIH1cbiAgICB9KSkoKTtcbiAgICByZXR1cm4gdHJ1ZTsgLy8gS2VlcHMgdGhlIG1lc3NhZ2UgY2hhbm5lbCBvcGVuIGZvciBhc3luYyByZXNwb25zZXNcbn0pO1xuLy8gQ2FwdHVyZSB0aGUgc2NyZWVuc2hvdCBpbiB0aGUgY3VycmVudCB0YWJcbmZ1bmN0aW9uIGNhcHR1cmVTY3JlZW5zaG90KCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBbdGFiXSA9IHlpZWxkIGNocm9tZS50YWJzLnF1ZXJ5KHsgYWN0aXZlOiB0cnVlLCBjdXJyZW50V2luZG93OiB0cnVlIH0pO1xuICAgICAgICAgICAgaWYgKHRhYikge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBjaHJvbWUudGFicy5jYXB0dXJlVmlzaWJsZVRhYih0YWIud2luZG93SWQsIHsgZm9ybWF0OiAnanBlZycsIHF1YWxpdHk6IDI1IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2FwdHVyaW5nIHNjcmVlbnNob3Q6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gaGFzaENvZGUoc3RyKSB7XG4gICAgbGV0IGhhc2ggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBoYXNoIHw9IDA7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiSGFzaCB2YWx1ZSBiZWZvcmUgcmV0dXJuOlwiLCBoYXNoKTtcbiAgICByZXR1cm4gaGFzaC50b1N0cmluZygpO1xufVxuLy8gbGlzdGVuIHRvIHN3aXRjaGVzIGJldHdlZW4gYWN0aXZhdGVkIHRhYnNcbmNocm9tZS50YWJzLm9uQWN0aXZhdGVkLmFkZExpc3RlbmVyKChhY3RpdmVJbmZvKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0YWJJZCA9IGFjdGl2ZUluZm8udGFiSWQ7XG4gICAgICAgIGNvbnN0IHRhYiA9IHlpZWxkIGNocm9tZS50YWJzLmdldCh0YWJJZCk7XG4gICAgICAgIGlmICghdGFiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZ2V0IHRhYiB3aXRoIElEOiAke3RhYklkfWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGBTd2l0Y2hlZCB0byB0YWIgJHt0YWJJZH0gd2l0aCBVUkw6ICR7dGFiLnVybH1gKTtcbiAgICAgICAgaWYgKHRhYi51cmwgJiYgdGFiLnVybC5pbmNsdWRlcygnYW1hem9uLmNvbScpKSB7XG4gICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U25hcHNob3RJZCA9IGBodG1sXyR7aGFzaENvZGUodGFiLnVybCl9XyR7dGltZXN0YW1wfWA7XG4gICAgICAgICAgICBjaHJvbWUudGFicy5zZW5kTWVzc2FnZSh0YWJJZCwgeyBhY3Rpb246ICdnZXRIVE1MJyB9LCAocmVzcG9uc2UpID0+IF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGh0bWxDb250ZW50ID0gcmVzcG9uc2UgPT09IG51bGwgfHwgcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3BvbnNlLmh0bWw7XG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHlpZWxkIGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldCh7IGh0bWxTbmFwc2hvdHM6IHt9IH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGh0bWxTbmFwc2hvdHMgPSByZXN1bHQuaHRtbFNuYXBzaG90cyB8fCB7fTtcbiAgICAgICAgICAgICAgICBodG1sU25hcHNob3RzW2N1cnJlbnRTbmFwc2hvdElkXSA9IGh0bWxDb250ZW50O1xuICAgICAgICAgICAgICAgIHlpZWxkIGNocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7IGh0bWxTbmFwc2hvdHMgfSk7XG4gICAgICAgICAgICAgICAgYWN0aW9uU2VxdWVuY2VJZCsrO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZTogXCJ0YWJBY3RpdmF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3VybDogdGFiLnVybCxcbiAgICAgICAgICAgICAgICAgICAgaHRtbFNuYXBzaG90SWQ6IGN1cnJlbnRTbmFwc2hvdElkLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25TZXF1ZW5jZUlkOiBhY3Rpb25TZXF1ZW5jZUlkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgaWYgKGludGVyYWN0aW9ucy5sZW5ndGggPiBpbnRlcmFjdGlvbnNMaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0geWllbGQgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KHsgaW50ZXJhY3Rpb25zOiBbXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmludGVyYWN0aW9ucyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0b3JlSW50ZXJhY3Rpb25zID0gcmVzdWx0LmNvbmNhdChpbnRlcmFjdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGlvbnMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgaW50ZXJhY3Rpb25zOiBzdG9yZUludGVyYWN0aW9ucyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNjcmVlbnNob3REYXRhVXJsID0geWllbGQgY2hyb21lLnRhYnMuY2FwdHVyZVZpc2libGVUYWIodGFiLndpbmRvd0lkLCB7IGZvcm1hdDogJ2pwZWcnLCBxdWFsaXR5OiAyNSB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzY3JlZW5zaG90SWQgPSBgc2NyZWVuc2hvdF8ke3RpbWVzdGFtcH1gO1xuICAgICAgICAgICAgICAgIHlpZWxkIHNhdmVTY3JlZW5zaG90KHNjcmVlbnNob3REYXRhVXJsLCBzY3JlZW5zaG90SWQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiB0YWIgYWN0aXZhdGUgaGFuZGxlcjonLCBlcnJvcik7XG4gICAgfVxufSkpO1xuZnVuY3Rpb24gc2VsZWN0UmVjaXBlKHRhYklkLCB1cmwpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBjb25zdCBwYXJzZWRVcmwgPSBuZXcgVVJMKHVybCk7XG4gICAgICAgIGNvbnN0IHBhdGggPSBwYXJzZWRVcmwucGF0aG5hbWU7XG4gICAgICAgIGZvciAoY29uc3QgcmVjaXBlIG9mIHJlY2lwZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoTWV0aG9kID0gcmVjaXBlLm1hdGNoX21ldGhvZCB8fCBcInRleHRcIjtcbiAgICAgICAgICAgIGlmIChtYXRjaE1ldGhvZCA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIHNjcmlwdCBpbiB0YWIgdG8gY2hlY2sgZm9yIG1hdGNoaW5nIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW3sgcmVzdWx0OiBoYXNNYXRjaCB9XSA9IHlpZWxkIGNocm9tZS5zY3JpcHRpbmcuZXhlY3V0ZVNjcmlwdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHsgdGFiSWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmM6IChzZWxlY3RvciwgbWF0Y2hUZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQgJiYgKCFtYXRjaFRleHQgfHwgKChfYiA9IChfYSA9IGVsZW1lbnQudGV4dENvbnRlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG1hdGNoVGV4dC50b0xvd2VyQ2FzZSgpKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZmFsc2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBbcmVjaXBlLm1hdGNoLCByZWNpcGUubWF0Y2hfdGV4dCB8fCBcIlwiXVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc01hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjaXBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2hlY2tpbmcgdGV4dCBtYXRjaDpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1hdGNoTWV0aG9kID09PSBcInVybFwiICYmIHJlY2lwZS5tYXRjaCA9PT0gcGF0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWNpcGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBtYXRjaGluZyByZWNpcGUgZm91bmQgZm9yIHBhdGg6ICR7cGF0aH1gKTtcbiAgICB9KTtcbn1cbmNocm9tZS53ZWJOYXZpZ2F0aW9uLm9uQ29tbWl0dGVkLmFkZExpc3RlbmVyKChkZXRhaWxzKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBpZiAoZGV0YWlscy5mcmFtZUlkICE9PSAwKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc29sZS5sb2coJ3dlYk5hdmlnYXRpb24gb25Db21taXR0ZWQgZXZlbnQgdHJpZ2dlcmVkOicsIGRldGFpbHMpO1xuICAgIGlmIChkZXRhaWxzLnVybC5pbmNsdWRlcygnYW1hem9uLmNvbScpKSB7XG4gICAgICAgIGNvbnN0IG5hdmlnYXRpb25UeXBlID0gYW5hbHl6ZU5hdmlnYXRpb24oZGV0YWlscy50YWJJZCwgZGV0YWlscy51cmwpO1xuICAgICAgICBjb25zb2xlLmxvZyhgTmF2aWdhdGlvbiB0eXBlOiAke25hdmlnYXRpb25UeXBlfSBmb3IgdGFiICR7ZGV0YWlscy50YWJJZH0gdG8gJHtkZXRhaWxzLnVybH1gKTtcbiAgICAgICAgY2hyb21lLnNjcmlwdGluZy5leGVjdXRlU2NyaXB0KHtcbiAgICAgICAgICAgIHRhcmdldDogeyB0YWJJZDogZGV0YWlscy50YWJJZCB9LFxuICAgICAgICAgICAgZnVuYzogKCkgPT4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTFxuICAgICAgICB9LCAocmVzdWx0cykgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0cyAmJiByZXN1bHRzWzBdICYmIHJlc3VsdHNbMF0ucmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFnZUh0bWwgPSByZXN1bHRzWzBdLnJlc3VsdDtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNuYXBzaG90SWQgPSBgaHRtbF8ke2hhc2hDb2RlKGRldGFpbHMudXJsKX1fJHt0aW1lc3RhbXB9YDtcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0geWllbGQgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KHsgaHRtbFNuYXBzaG90czoge30gfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaHRtbFNuYXBzaG90cyA9IHJlc3VsdC5odG1sU25hcHNob3RzIHx8IHt9O1xuICAgICAgICAgICAgICAgIGh0bWxTbmFwc2hvdHNbY3VycmVudFNuYXBzaG90SWRdID0gcGFnZUh0bWw7XG4gICAgICAgICAgICAgICAgeWllbGQgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgaHRtbFNuYXBzaG90cyB9KTtcbiAgICAgICAgICAgICAgICAvLyBBZGQgbmF2aWdhdGlvbiBkYXRhIHRvIGludGVyYWN0aW9uc1xuICAgICAgICAgICAgICAgIGFjdGlvblNlcXVlbmNlSWQrKztcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBldmVudFR5cGU6IFwibmF2aWdhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uVHlwZTogbmF2aWdhdGlvblR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogdGltZXN0YW1wLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRfdXJsOiBkZXRhaWxzLnVybCxcbiAgICAgICAgICAgICAgICAgICAgaHRtbFNuYXBzaG90SWQ6IGN1cnJlbnRTbmFwc2hvdElkLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25TZXF1ZW5jZUlkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgaWYgKGludGVyYWN0aW9ucy5sZW5ndGggPiBpbnRlcmFjdGlvbnNMaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0geWllbGQgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KHsgaW50ZXJhY3Rpb25zOiBbXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmludGVyYWN0aW9ucyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0b3JlSW50ZXJhY3Rpb25zID0gcmVzdWx0LmNvbmNhdChpbnRlcmFjdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGlvbnMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHsgaW50ZXJhY3Rpb25zOiBzdG9yZUludGVyYWN0aW9ucyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gYWRkIHNjcmVlbnNob3RcbiAgICAgICAgICAgICAgICBjb25zdCB0YWIgPSB5aWVsZCBjaHJvbWUudGFicy5nZXQoZGV0YWlscy50YWJJZCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2NyZWVuc2hvdERhdGFVcmwgPSB5aWVsZCBjaHJvbWUudGFicy5jYXB0dXJlVmlzaWJsZVRhYih0YWIud2luZG93SWQsIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAnanBlZycsXG4gICAgICAgICAgICAgICAgICAgIHF1YWxpdHk6IDI1XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2NyZWVuc2hvdElkID0gYHNjcmVlbnNob3RfJHt0aW1lc3RhbXB9YDtcbiAgICAgICAgICAgICAgICB5aWVsZCBzYXZlU2NyZWVuc2hvdChzY3JlZW5zaG90RGF0YVVybCwgc2NyZWVuc2hvdElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbn0pKTtcbi8vIEFkZCBjbGVhbnVwIHdoZW4gdGFiIGlzIGNsb3NlZFxuY2hyb21lLnRhYnMub25SZW1vdmVkLmFkZExpc3RlbmVyKCh0YWJJZCkgPT4ge1xuICAgIGRlbGV0ZSB0YWJOYXZpZ2F0aW9uSGlzdG9yeVt0YWJJZF07XG59KTtcbi8vIEFkZCB0aGlzIGZ1bmN0aW9uIHRvIGhhbmRsZSBkYXRhIHVwbG9hZFxuZnVuY3Rpb24gdXBsb2FkRGF0YVRvU2VydmVyKCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpO1xuICAgICAgICAgICAgY29uc3QgZm9sZGVyTmFtZSA9IGBEQVRBL1NFU1NJT05fJHt0aW1lc3RhbXB9YDtcbiAgICAgICAgICAgIC8vIEdldCB1c2VySWQgZnJvbSBzdG9yYWdlXG4gICAgICAgICAgICBjb25zdCB1c2VySWRSZXN1bHQgPSB5aWVsZCBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoeyB1c2VySWQ6IFwiXCIgfSk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VXNlcklkID0gdXNlcklkUmVzdWx0LnVzZXJJZDtcbiAgICAgICAgICAgIC8vIEdldCBhbGwgZGF0YSBmcm9tIHN0b3JhZ2VcbiAgICAgICAgICAgIGNvbnN0IHNuYXBzaG90cyA9IHlpZWxkIGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldCh7IGh0bWxTbmFwc2hvdHM6IFtdIH0pO1xuICAgICAgICAgICAgY29uc3QgaW50ZXJhY3QgPSB5aWVsZCBjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoeyBpbnRlcmFjdGlvbnM6IFtdIH0pO1xuICAgICAgICAgICAgY29uc3Qgb3JkZXJEZXRhaWxzID0geWllbGQgY2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KHsgb3JkZXJEZXRhaWxzOiBbXSB9KTtcbiAgICAgICAgICAgIGNvbnN0IHNjcmVlbiA9IHlpZWxkIGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldCh7IHNjcmVlbnNob3RzOiBbXSB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzbmFwc2hvdHMnLCBzbmFwc2hvdHMuaHRtbFNuYXBzaG90cy5sZW5ndGgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ludGVyYWN0JywgaW50ZXJhY3QpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ29yZGVyRGV0YWlscycsIG9yZGVyRGV0YWlscyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2NyZWVuJywgc2NyZWVuLnNjcmVlbnNob3RzLmxlbmd0aCk7XG4gICAgICAgICAgICBsZXQgaHRtbFNuYXBzaG90cyA9IHNuYXBzaG90cy5odG1sU25hcHNob3RzIHx8IHt9O1xuICAgICAgICAgICAgbGV0IHN0b3JlSW50ZXJhY3Rpb25zID0gaW50ZXJhY3QuaW50ZXJhY3Rpb25zIHx8IFtdO1xuICAgICAgICAgICAgbGV0IHN0b3Jlb3JkZXJEZXRhaWxzID0gb3JkZXJEZXRhaWxzLm9yZGVyRGV0YWlscyB8fCBbXTtcbiAgICAgICAgICAgIGxldCBzdG9yZVNjcmVlbnNob3RzID0gc2NyZWVuLnNjcmVlbnNob3RzIHx8IFtdO1xuICAgICAgICAgICAgLy8gQ29tYmluZSB3aXRoIGluLW1lbW9yeSBkYXRhXG4gICAgICAgICAgICBzdG9yZUludGVyYWN0aW9ucyA9IHN0b3JlSW50ZXJhY3Rpb25zLmNvbmNhdChpbnRlcmFjdGlvbnMpO1xuICAgICAgICAgICAgc3RvcmVTY3JlZW5zaG90cyA9IHN0b3JlU2NyZWVuc2hvdHMuY29uY2F0KHNjcmVlbnNob3RzKTtcbiAgICAgICAgICAgIC8vIFByZXBhcmUgdGhlIGZ1bGwgZGF0YSBvYmplY3RcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxEYXRhID0ge1xuICAgICAgICAgICAgICAgIGh0bWxTbmFwc2hvdHMsXG4gICAgICAgICAgICAgICAgaW50ZXJhY3Rpb25zOiBzdG9yZUludGVyYWN0aW9ucyxcbiAgICAgICAgICAgICAgICBvcmRlckRldGFpbHM6IHN0b3Jlb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIFVwbG9hZCBzZXNzaW9uIGluZm9cbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25JbmZvID0gbmV3IEJsb2IoW2BTZXNzaW9uIGRhdGEgZm9yIHRpbWVzdGFtcDogJHt0aW1lc3RhbXB9LCB1c2VyIGlkOiAke2N1cnJlbnRVc2VySWR9IFxcbiBvcmRlciBkZXRhaWxzOiBcXG4gJHtKU09OLnN0cmluZ2lmeShzdG9yZW9yZGVyRGV0YWlscyl9YF0sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pO1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbkZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICBzZXNzaW9uRm9ybURhdGEuYXBwZW5kKCdmaWxlJywgc2Vzc2lvbkluZm8sIGAke2ZvbGRlck5hbWV9L3Nlc3Npb25faW5mby50eHRgKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGxvYWRpbmcgc2Vzc2lvbiBpbmZvJyk7XG4gICAgICAgICAgICB5aWVsZCBmZXRjaCh1cGxvYWRfdXJsLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogc2Vzc2lvbkZvcm1EYXRhXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFVwbG9hZCBpbnRlcmFjdGlvbnMgSlNPTlxuICAgICAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25zQmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShmdWxsRGF0YSwgbnVsbCwgMildLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IGpzb25Gb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3VwbG9hZGluZyBpbnRlcmFjdGlvbnMnKTtcbiAgICAgICAgICAgIGpzb25Gb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBpbnRlcmFjdGlvbnNCbG9iLCBgJHtmb2xkZXJOYW1lfS9pbnRlcmFjdGlvbnMuanNvbmApO1xuICAgICAgICAgICAgeWllbGQgZmV0Y2godXBsb2FkX3VybCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IGpzb25Gb3JtRGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBVcGxvYWQgc2NyZWVuc2hvdHNcbiAgICAgICAgICAgIGZvciAoY29uc3QgW3NjcmVlbnNob3REYXRhLCBzY3JlZW5zaG90SWRdIG9mIHN0b3JlU2NyZWVuc2hvdHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIGZldGNoKHNjcmVlbnNob3REYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgYmxvYiwgYCR7Zm9sZGVyTmFtZX0vJHtzY3JlZW5zaG90SWQucmVwbGFjZSgvWzouXS9nLCBcIi1cIil9LmpwZ2ApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGxvYWRpbmcgc2NyZWVuc2hvdHMnKTtcbiAgICAgICAgICAgICAgICB5aWVsZCBmZXRjaCh1cGxvYWRfdXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiBmb3JtRGF0YVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2xlYXIgY2FjaGUgYWZ0ZXIgc3VjY2Vzc2Z1bCB1cGxvYWRcbiAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLmxvY2FsLnJlbW92ZShbJ2h0bWxTbmFwc2hvdHMnLCAnaW50ZXJhY3Rpb25zJywgJ29yZGVyRGV0YWlscycsICdzY3JlZW5zaG90cyddKTtcbiAgICAgICAgICAgIGludGVyYWN0aW9ucy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgc2NyZWVuc2hvdHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGRhdGE6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vLyBTdGFydCB0aGUgcGVyaW9kaWMgdXBsb2FkIHRpbWVyXG5mdW5jdGlvbiBzdGFydFBlcmlvZGljVXBsb2FkKCkge1xuICAgIGlmICghdXBsb2FkVGltZXIpIHtcbiAgICAgICAgdXBsb2FkVGltZXIgPSBzZXRJbnRlcnZhbCh1cGxvYWREYXRhVG9TZXJ2ZXIsIDYwMDAwKTsgLy8gNjAgc2Vjb25kc1xuICAgIH1cbn1cbi8vIFN0b3AgdGhlIHBlcmlvZGljIHVwbG9hZCB0aW1lclxuZnVuY3Rpb24gc3RvcFBlcmlvZGljVXBsb2FkKCkge1xuICAgIGlmICh1cGxvYWRUaW1lcikge1xuICAgICAgICBjbGVhckludGVydmFsKHVwbG9hZFRpbWVyKTtcbiAgICAgICAgdXBsb2FkVGltZXIgPSBudWxsO1xuICAgIH1cbn1cbi8vIHN0YXJ0UGVyaW9kaWNVcGxvYWQoKTtcbiJdLCJuYW1lcyI6WyJuYXYiLCJyZWNpcGVzIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJ2YWx1ZSIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSIsImNocm9tZSIsIndlYk5hdmlnYXRpb24iLCJvbkNvbW1pdHRlZCIsImFkZExpc3RlbmVyIiwiZGV0YWlscyIsImZyYW1lSWQiLCJzY3JpcHRpbmciLCJleGVjdXRlU2NyaXB0IiwidGFyZ2V0IiwidGFiSWQiLCJmaWxlcyIsIndvcmxkIiwidXJsIiwidXJsTWF0Y2hlcyIsInVwbG9hZF91cmwiLCJpbnRlcmFjdGlvbnMiLCJzY3JlZW5zaG90cyIsImFjdGlvblNlcXVlbmNlSWQiLCJ0YWJOYXZpZ2F0aW9uSGlzdG9yeSIsInNhdmVTY3JlZW5zaG90Iiwic2NyZWVuc2hvdERhdGFVcmwiLCJzY3JlZW5zaG90SWQiLCJ0aGlzIiwicHVzaCIsImxlbmd0aCIsInN0b3JhZ2UiLCJsb2NhbCIsImdldCIsInN0b3JlU2NyZWVuc2hvdHMiLCJjb25jYXQiLCJzZXQiLCJoYXNoQ29kZSIsInN0ciIsImhhc2giLCJpIiwiY2hhckNvZGVBdCIsImNvbnNvbGUiLCJsb2ciLCJ0b1N0cmluZyIsInJ1bnRpbWUiLCJvbk1lc3NhZ2UiLCJtZXNzYWdlIiwic2VuZGVyIiwic2VuZFJlc3BvbnNlIiwiX2EiLCJhY3Rpb24iLCJkYXRhIiwiZXZlbnRUeXBlIiwic3RvcmVJbnRlcmFjdGlvbnMiLCJzdWNjZXNzIiwidGFiIiwidGFicyIsInF1ZXJ5IiwiYWN0aXZlIiwiY3VycmVudFdpbmRvdyIsImNhcHR1cmVWaXNpYmxlVGFiIiwid2luZG93SWQiLCJmb3JtYXQiLCJxdWFsaXR5IiwiZXJyb3IiLCJjYXB0dXJlU2NyZWVuc2hvdCIsInVuZGVmaW5lZCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInJlcGxhY2UiLCJmb2xkZXJOYW1lIiwiY3VycmVudFVzZXJJZCIsInVzZXJJZCIsInNuYXBzaG90cyIsImh0bWxTbmFwc2hvdHMiLCJpbnRlcmFjdCIsIm9yZGVyRGV0YWlscyIsInNjcmVlbiIsInN0b3Jlb3JkZXJEZXRhaWxzIiwiZnVsbERhdGEiLCJzZXNzaW9uSW5mbyIsIkJsb2IiLCJKU09OIiwic3RyaW5naWZ5IiwidHlwZSIsInNlc3Npb25Gb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiaW50ZXJhY3Rpb25zQmxvYiIsImpzb25Gb3JtRGF0YSIsInNjcmVlbnNob3REYXRhIiwicmVzcG9uc2UiLCJibG9iIiwiZm9ybURhdGEiLCJyZW1vdmUiLCJ1cGxvYWREYXRhVG9TZXJ2ZXIiLCJpZCIsInBhdGgiLCJVUkwiLCJwYXRobmFtZSIsInJlY2lwZSIsIm1hdGNoTWV0aG9kIiwibWF0Y2hfbWV0aG9kIiwiaGFzTWF0Y2giLCJmdW5jIiwic2VsZWN0b3IiLCJtYXRjaFRleHQiLCJfYiIsImVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJhcmdzIiwibWF0Y2giLCJtYXRjaF90ZXh0IiwiRXJyb3IiLCJzZWxlY3RSZWNpcGUiLCJjYXRjaCIsIm9uQWN0aXZhdGVkIiwiYWN0aXZlSW5mbyIsImN1cnJlbnRTbmFwc2hvdElkIiwic2VuZE1lc3NhZ2UiLCJodG1sQ29udGVudCIsImh0bWwiLCJ0YXJnZXRfdXJsIiwiaHRtbFNuYXBzaG90SWQiLCJuYXZpZ2F0aW9uVHlwZSIsImJhY2tTdGFjayIsImZvcndhcmRTdGFjayIsImN1cnJlbnRVcmwiLCJoaXN0b3J5IiwicG9wIiwiYW5hbHl6ZU5hdmlnYXRpb24iLCJkb2N1bWVudEVsZW1lbnQiLCJvdXRlckhUTUwiLCJyZXN1bHRzIiwicGFnZUh0bWwiLCJvblJlbW92ZWQiXSwic291cmNlUm9vdCI6IiJ9