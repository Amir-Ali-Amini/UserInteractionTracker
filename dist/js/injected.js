({277:function(){var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};const t=EventTarget.prototype.addEventListener;console.log("start");let n=0;function o(e){if(e.id)return`#${e.id}`;let t=[],n=e;for(;n&&n!==document.body&&n.parentElement;){let e=n.tagName.toLowerCase();n.className&&"string"==typeof n.className&&(e+="."+n.className.trim().replace(/\s+/g,"."));let o=n,r=1;for(;o.previousElementSibling;)o=o.previousElementSibling,o.tagName===n.tagName&&r++;r>1&&(e+=`:nth-of-type(${r})`),t.unshift(e),n=n.parentElement}return t.join(" > ")}function r(e,t,n,o,r){const a=function e(t,n=0){return!t||n>=5?null:t.hasAttribute("data-clickable-id")?t:e(t.parentElement,n+1)}(t),i=a&&a.getAttribute("data-clickable-id")||"",s=function(){const e=window.location.href,t=(new Date).toISOString();return`html_${function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return console.log("Hash value before return:",t),t.toString()}(e)}_${t}`}();return{eventType:e,timestamp:n,target:{tagName:t.tagName,className:t.className,id:t.id,innerText:t.innerText||t.value||"",outerHTML:t.outerHTML},targetOuterHTML:t.outerHTML,targetClass:t.className,targetId:t.id,targetText:t.innerText||t.value||"",htmlSnapshotId:s,selector:o||"",clickableId:i||"",url:r||"",htmlContent:document.documentElement.outerHTML}}EventTarget.prototype.addEventListener=function(a,i,s){if(console.log("[Monkey Patch] Adding event listener for type:",a),"click"===a&&i){const c=function(t){return e(this,void 0,void 0,(function*(){const e=Date.now();if(e-n<150)return void console.log("[Monkey Patch] Debouncing click event");n=e,console.log("[Monkey Patch] Click detected on:",t.target);const a=(new Date).toISOString(),s=t.target.closest("a");if(s&&s.href&&"a"===s.tagName.toLowerCase()&&!s.href.startsWith("javascript:")){t.preventDefault(),t.stopPropagation();const e=s.href;try{const n=new Promise(((e,t)=>{function n(o){"SCREENSHOT_COMPLETE"===o.data.type&&o.data.timestamp===a&&(window.removeEventListener("message",n),o.data.success?e(void 0):t(new Error(o.data.error||"Screenshot failed")))}window.addEventListener("message",n),setTimeout((()=>{window.removeEventListener("message",n),t(new Error("Screenshot timeout"))}),3e3)})),i=new Promise(((e,t)=>{function n(o){"INTERACTION_COMPLETE"===o.data.type&&o.data.timestamp===a&&(window.removeEventListener("message",n),o.data.success?e(void 0):t(new Error(o.data.error||"Interaction failed")))}window.addEventListener("message",n),setTimeout((()=>{window.removeEventListener("message",n),t(new Error("Interaction timeout"))}),3e3)})),s=r("click_a",t.target,a,o(t.target),window.location.href);window.postMessage({type:"CAPTURE_SCREENSHOT",timestamp:a},"*"),window.postMessage({type:"SAVE_INTERACTION_DATA",data:s},"*"),yield n,yield i,window.location.href=e}catch(t){console.error("Error:",t),window.location.href=e}}else try{const e=new Promise(((e,t)=>{function n(o){"SCREENSHOT_COMPLETE"===o.data.type&&o.data.timestamp===a&&(window.removeEventListener("message",n),o.data.success?e(void 0):t(new Error(o.data.error||"Screenshot failed")))}window.addEventListener("message",n),setTimeout((()=>{window.removeEventListener("message",n),t(new Error("Screenshot timeout"))}),3e3)})),n=r("click_b",t.target,a,o(t.target),window.location.href);window.postMessage({type:"CAPTURE_SCREENSHOT",timestamp:a},"*"),window.postMessage({type:"SAVE_INTERACTION_DATA",data:n},"*");const s=new Promise(((e,t)=>{function n(o){"INTERACTION_COMPLETE"===o.data.type&&o.data.timestamp===a&&(window.removeEventListener("message",n),o.data.success?e(void 0):t(new Error(o.data.error||"Interaction failed")))}window.addEventListener("message",n),setTimeout((()=>{window.removeEventListener("message",n),t(new Error("Interaction timeout"))}),3e3)}));yield e,yield s,"function"==typeof i?i.call(this,t):i&&"function"==typeof i.handleEvent&&i.handleEvent.call(i,t)}catch(e){console.error("Error capturing screenshot:",e),"function"==typeof i?i.call(this,t):i&&"function"==typeof i.handleEvent&&i.handleEvent.call(i,t)}}))};return t.call(this,a,c,s)}return t.call(this,a,i,s)},console.log("[Monkey Patch] addEventListener successfully patched."),document.addEventListener("click",(function(t){return e(this,void 0,void 0,(function*(){const e=Date.now();if(e-n<150)return void console.log("[Monkey Patch] Debouncing anchor click event");n=e;const a=t.target,i=a.closest("a");if(i&&"a"===i.tagName.toLowerCase()&&i.href&&(console.log("[Intercepted] Click on <a> tag:",i.href),!i.href.startsWith("javascript:"))){t.preventDefault(),t.stopPropagation();const e=(new Date).toISOString(),n=i.href;try{const i=new Promise(((t,n)=>{function o(r){"SCREENSHOT_COMPLETE"===r.data.type&&r.data.timestamp===e&&(window.removeEventListener("message",o),r.data.success?t(void 0):n(new Error(r.data.error||"Screenshot failed")))}window.addEventListener("message",o),setTimeout((()=>{window.removeEventListener("message",o),n(new Error("Screenshot timeout"))}),3e3)}));window.postMessage({type:"CAPTURE_SCREENSHOT",timestamp:e},"*");const s=r("click_c",t.target,e,o(a),window.location.href);window.postMessage({type:"SAVE_INTERACTION_DATA",data:s},"*");const c=new Promise(((t,n)=>{function o(r){"INTERACTION_COMPLETE"===r.data.type&&r.data.timestamp===e&&(window.removeEventListener("message",o),r.data.success?t(void 0):n(new Error(r.data.error||"Interaction failed")))}window.addEventListener("message",o),setTimeout((()=>{window.removeEventListener("message",o),n(new Error("Interaction timeout"))}),3e3)}));yield i,yield c,window.location.href=n}catch(e){console.error("Error capturing screenshot:",e),window.location.href=n}}}))}),!0)}})[277]();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0scUJBQXNCL0IsVUFBV0EsR0FBYSxLQUN6RSxNQUFNNkMsRUFBT2hELEVBQW1CLFVBQVdzQyxFQUFNcEMsT0FBUUMsRUFBV3RCLEVBQWlCcUIsR0FBU1UsT0FBT0MsU0FBU0MsTUFDOUdGLE9BQU80QyxZQUFZLENBQUV0QixLQUFNLHdCQUF5QmMsS0FBTUEsR0FBUSxLQUNsRSxNQUFNTSxFQUFzQixJQUFJN0YsU0FBUSxDQUFDQyxFQUFTQyxLQUM5QyxTQUFTNEYsRUFBZWpCLEdBQ0kseUJBQXBCQSxFQUFNVSxLQUFLZCxNQUNYSSxFQUFNVSxLQUFLN0MsWUFBY0EsSUFDekJTLE9BQU9xQyxvQkFBb0IsVUFBV00sR0FDbENqQixFQUFNVSxLQUFLRSxRQUNYeEYsT0FBUSxHQUdSQyxFQUFPLElBQUl3RixNQUFNYixFQUFNVSxLQUFLSSxPQUFTLHVCQUdqRCxDQUNBeEMsT0FBT25DLGlCQUFpQixVQUFXOEUsR0FFbkNGLFlBQVcsS0FDUHpDLE9BQU9xQyxvQkFBb0IsVUFBV00sR0FDdEM1RixFQUFPLElBQUl3RixNQUFNLHVCQUF1QixHQUN6QyxJQUFLLFVBR05MLFFBQ0FRLEVBRU4xQyxPQUFPQyxTQUFTQyxLQUFPK0IsQ0FDM0IsQ0FDQSxNQUFPTyxHQUNIMUUsUUFBUTBFLE1BQU0sOEJBQStCQSxHQUM3Q3hDLE9BQU9DLFNBQVNDLEtBQU8rQixDQUMzQixDQUNKLENBRVIsR0FDSixJQUFHLEUsSUN0VWEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci8uL3NyYy9pbmplY3RlZC50cyIsIndlYnBhY2s6Ly9jaHJvbWUtZXh0ZW5zaW9uLXR5cGVzY3JpcHQtc3RhcnRlci93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG4vLyBFeGFtcGxlOiBNb25rZXlwYXRjaCBhIGdsb2JhbCBmdW5jdGlvblxuY29uc3Qgb3JpZ2luYWxBZGRFdmVudExpc3RlbmVyID0gRXZlbnRUYXJnZXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI7XG5jb25zb2xlLmxvZygnc3RhcnQnKTtcbi8vIEFkZCB0aGlzIGF0IHRoZSB0b3Agb2YgdGhlIGZpbGVcbmNvbnN0IERFQk9VTkNFX0RFTEFZID0gMTUwOyAvLyAzMDBtc1xubGV0IGxhc3RDbGlja1RpbWVzdGFtcCA9IDA7XG5mdW5jdGlvbiBnZW5lcmF0ZUh0bWxTbmFwc2hvdElkKCkge1xuICAgIGNvbnN0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICByZXR1cm4gYGh0bWxfJHtoYXNoQ29kZSh1cmwpfV8ke3RpbWVzdGFtcH1gO1xufVxuZnVuY3Rpb24gaGFzaENvZGUoc3RyKSB7XG4gICAgbGV0IGhhc2ggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBoYXNoIHw9IDA7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiSGFzaCB2YWx1ZSBiZWZvcmUgcmV0dXJuOlwiLCBoYXNoKTtcbiAgICByZXR1cm4gaGFzaC50b1N0cmluZygpO1xufVxuZnVuY3Rpb24gZ2VuZXJhdGVTZWxlY3RvcihlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQuaWQpIHtcbiAgICAgICAgcmV0dXJuIGAjJHtlbGVtZW50LmlkfWA7XG4gICAgfVxuICAgIGxldCBwYXRoID0gW107XG4gICAgbGV0IGN1cnJlbnQgPSBlbGVtZW50O1xuICAgIHdoaWxlIChjdXJyZW50ICYmIGN1cnJlbnQgIT09IGRvY3VtZW50LmJvZHkgJiYgY3VycmVudC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIGxldCBzZWxlY3RvciA9IGN1cnJlbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAvLyDmt7vliqDnsbvlkI3vvIjlj6/pgInvvIlcbiAgICAgICAgaWYgKGN1cnJlbnQuY2xhc3NOYW1lICYmIHR5cGVvZiBjdXJyZW50LmNsYXNzTmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHNlbGVjdG9yICs9ICcuJyArIGN1cnJlbnQuY2xhc3NOYW1lLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8g5re75Yqg5ZCM57qn5YWD57Sg5Lit55qE5L2N572uXG4gICAgICAgIGxldCBzaWJsaW5nID0gY3VycmVudDtcbiAgICAgICAgbGV0IG50aCA9IDE7XG4gICAgICAgIHdoaWxlIChzaWJsaW5nLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHtcbiAgICAgICAgICAgIHNpYmxpbmcgPSBzaWJsaW5nLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAoc2libGluZy50YWdOYW1lID09PSBjdXJyZW50LnRhZ05hbWUpIHtcbiAgICAgICAgICAgICAgICBudGgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobnRoID4gMSkge1xuICAgICAgICAgICAgc2VsZWN0b3IgKz0gYDpudGgtb2YtdHlwZSgke250aH0pYDtcbiAgICAgICAgfVxuICAgICAgICBwYXRoLnVuc2hpZnQoc2VsZWN0b3IpO1xuICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xuICAgIH1cbiAgICByZXR1cm4gcGF0aC5qb2luKCcgPiAnKTtcbn1cbmZ1bmN0aW9uIGNhcHR1cmVJbnRlcmFjdGlvbihldmVudFR5cGUsIHRhcmdldCwgdGltZXN0YW1wLCBzZWxlY3RvciwgdXJsKSB7XG4gICAgZnVuY3Rpb24gZmluZENsaWNrYWJsZVBhcmVudChlbGVtZW50LCBkZXB0aCA9IDApIHtcbiAgICAgICAgaWYgKCFlbGVtZW50IHx8IGRlcHRoID49IDUpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWNsaWNrYWJsZS1pZCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmluZENsaWNrYWJsZVBhcmVudChlbGVtZW50LnBhcmVudEVsZW1lbnQsIGRlcHRoICsgMSk7XG4gICAgfVxuICAgIGNvbnN0IGNsaWNrYWJsZUVsZW1lbnQgPSBmaW5kQ2xpY2thYmxlUGFyZW50KHRhcmdldCk7XG4gICAgY29uc3QgY2xpY2thYmxlSWQgPSBjbGlja2FibGVFbGVtZW50ID8gY2xpY2thYmxlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2xpY2thYmxlLWlkJykgfHwgJycgOiAnJztcbiAgICAvLyBHZW5lcmF0ZSBuZXcgSFRNTCBzbmFwc2hvdCBJRFxuICAgIGNvbnN0IGN1cnJlbnRTbmFwc2hvdElkID0gZ2VuZXJhdGVIdG1sU25hcHNob3RJZCgpO1xuICAgIC8vIENyZWF0ZSBhIHNlcmlhbGl6YWJsZSB2ZXJzaW9uIG9mIHRoZSB0YXJnZXRcbiAgICBjb25zdCBzZXJpYWxpemVkVGFyZ2V0ID0ge1xuICAgICAgICB0YWdOYW1lOiB0YXJnZXQudGFnTmFtZSxcbiAgICAgICAgY2xhc3NOYW1lOiB0YXJnZXQuY2xhc3NOYW1lLFxuICAgICAgICBpZDogdGFyZ2V0LmlkLFxuICAgICAgICBpbm5lclRleHQ6IHRhcmdldC5pbm5lclRleHQgfHwgdGFyZ2V0LnZhbHVlIHx8ICcnLFxuICAgICAgICBvdXRlckhUTUw6IHRhcmdldC5vdXRlckhUTUxcbiAgICB9O1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIGV2ZW50VHlwZSxcbiAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXAsXG4gICAgICAgIHRhcmdldDogc2VyaWFsaXplZFRhcmdldCxcbiAgICAgICAgdGFyZ2V0T3V0ZXJIVE1MOiB0YXJnZXQub3V0ZXJIVE1MLFxuICAgICAgICB0YXJnZXRDbGFzczogdGFyZ2V0LmNsYXNzTmFtZSxcbiAgICAgICAgdGFyZ2V0SWQ6IHRhcmdldC5pZCxcbiAgICAgICAgdGFyZ2V0VGV4dDogdGFyZ2V0LmlubmVyVGV4dCB8fCB0YXJnZXQudmFsdWUgfHwgJycsXG4gICAgICAgIGh0bWxTbmFwc2hvdElkOiBjdXJyZW50U25hcHNob3RJZCxcbiAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yIHx8ICcnLFxuICAgICAgICBjbGlja2FibGVJZDogY2xpY2thYmxlSWQgfHwgJycsXG4gICAgICAgIHVybDogdXJsIHx8ICcnLFxuICAgICAgICBodG1sQ29udGVudDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTFxuICAgIH07XG4gICAgcmV0dXJuIGRhdGE7XG59XG4vLyBNb25rZXkgcGF0Y2ggYWRkRXZlbnRMaXN0ZW5lclxuRXZlbnRUYXJnZXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpIHtcbiAgICBjb25zb2xlLmxvZygnW01vbmtleSBQYXRjaF0gQWRkaW5nIGV2ZW50IGxpc3RlbmVyIGZvciB0eXBlOicsIHR5cGUpO1xuICAgIGlmICh0eXBlID09PSAnY2xpY2snICYmIGxpc3RlbmVyKSB7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgZGVib3VuY2luZyBsb2dpY1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyAtIGxhc3RDbGlja1RpbWVzdGFtcCA8IERFQk9VTkNFX0RFTEFZKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTW9ua2V5IFBhdGNoXSBEZWJvdW5jaW5nIGNsaWNrIGV2ZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGFzdENsaWNrVGltZXN0YW1wID0gbm93O1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbTW9ua2V5IFBhdGNoXSBDbGljayBkZXRlY3RlZCBvbjonLCBldmVudC50YXJnZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5jaG9yID0gdGFyZ2V0LmNsb3Nlc3QoJ2EnKTtcbiAgICAgICAgICAgICAgICBpZiAoYW5jaG9yICYmIGFuY2hvci5ocmVmICYmIGFuY2hvci50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhJyAmJiAhYW5jaG9yLmhyZWYuc3RhcnRzV2l0aCgnamF2YXNjcmlwdDonKSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SHJlZiA9IGFuY2hvci5ocmVmO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NyZWVuc2hvdENvbXBsZXRlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1lc3NhZ2UoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEudHlwZSA9PT0gJ1NDUkVFTlNIT1RfQ09NUExFVEUnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLnRpbWVzdGFtcCA9PT0gdGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGhhbmRsZU1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodm9pZCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoZXZlbnQuZGF0YS5lcnJvciB8fCAnU2NyZWVuc2hvdCBmYWlsZWQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGltZW91dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGhhbmRsZU1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdTY3JlZW5zaG90IHRpbWVvdXQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVyYWN0aW9uQ29tcGxldGUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlTWVzc2FnZTEoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEudHlwZSA9PT0gJ0lOVEVSQUNUSU9OX0NPTVBMRVRFJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YS50aW1lc3RhbXAgPT09IHRpbWVzdGFtcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVNZXNzYWdlMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2b2lkIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihldmVudC5kYXRhLmVycm9yIHx8ICdJbnRlcmFjdGlvbiBmYWlsZWQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVNZXNzYWdlMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRpbWVvdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVNZXNzYWdlMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0ludGVyYWN0aW9uIHRpbWVvdXQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjYXB0dXJlSW50ZXJhY3Rpb24oJ2NsaWNrX2EnLCBldmVudC50YXJnZXQsIHRpbWVzdGFtcCwgZ2VuZXJhdGVTZWxlY3RvcihldmVudC50YXJnZXQpLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UoeyB0eXBlOiAnQ0FQVFVSRV9TQ1JFRU5TSE9UJywgdGltZXN0YW1wOiB0aW1lc3RhbXAgfSwgJyonKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7IHR5cGU6ICdTQVZFX0lOVEVSQUNUSU9OX0RBVEEnLCBkYXRhOiBkYXRhIH0sICcqJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBzY3JlZW5zaG90IHRvIGNvbXBsZXRlXG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBzY3JlZW5zaG90Q29tcGxldGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBpbnRlcmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5omL5Yqo5o6n5Yi26Lez6L2sXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHRhcmdldEhyZWY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHRhcmdldEhyZWY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBwcm9taXNlIHRvIHdhaXQgZm9yIHNjcmVlbnNob3QgY29tcGxldGlvblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY3JlZW5zaG90Q29tcGxldGUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVNZXNzYWdlKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEudHlwZSA9PT0gJ1NDUkVFTlNIT1RfQ09NUExFVEUnICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEudGltZXN0YW1wID09PSB0aW1lc3RhbXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2b2lkIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihldmVudC5kYXRhLmVycm9yIHx8ICdTY3JlZW5zaG90IGZhaWxlZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGltZW91dFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdTY3JlZW5zaG90IHRpbWVvdXQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjYXB0dXJlSW50ZXJhY3Rpb24oJ2NsaWNrX2InLCBldmVudC50YXJnZXQsIHRpbWVzdGFtcCwgZ2VuZXJhdGVTZWxlY3RvcihldmVudC50YXJnZXQpLCB3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3Qgc2NyZWVuc2hvdFxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UoeyB0eXBlOiAnQ0FQVFVSRV9TQ1JFRU5TSE9UJywgdGltZXN0YW1wOiB0aW1lc3RhbXAgfSwgJyonKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHsgdHlwZTogJ1NBVkVfSU5URVJBQ1RJT05fREFUQScsIGRhdGE6IGRhdGEgfSwgJyonKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW50ZXJhY3Rpb25Db21wbGV0ZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1lc3NhZ2UxKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEudHlwZSA9PT0gJ0lOVEVSQUNUSU9OX0NPTVBMRVRFJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLnRpbWVzdGFtcCA9PT0gdGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlTWVzc2FnZTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZvaWQgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGV2ZW50LmRhdGEuZXJyb3IgfHwgJ0ludGVyYWN0aW9uIGZhaWxlZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlTWVzc2FnZTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRpbWVvdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlTWVzc2FnZTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0ludGVyYWN0aW9uIHRpbWVvdXQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHNjcmVlbnNob3QgdG8gY29tcGxldGVcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgc2NyZWVuc2hvdENvbXBsZXRlO1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBpbnRlcmFjdGlvbkNvbXBsZXRlO1xuICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIG9yaWdpbmFsIGxpc3RlbmVyIGFmdGVyIHNjcmVlbnNob3QgaXMgY2FwdHVyZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobGlzdGVuZXIgJiYgdHlwZW9mIGxpc3RlbmVyLmhhbmRsZUV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lci5oYW5kbGVFdmVudC5jYWxsKGxpc3RlbmVyLCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhcHR1cmluZyBzY3JlZW5zaG90OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSBvcmlnaW5hbCBsaXN0ZW5lciBldmVuIGlmIHNjcmVlbnNob3QgZmFpbHNcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobGlzdGVuZXIgJiYgdHlwZW9mIGxpc3RlbmVyLmhhbmRsZUV2ZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lci5oYW5kbGVFdmVudC5jYWxsKGxpc3RlbmVyLCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgYWRkRXZlbnRMaXN0ZW5lciB3aXRoIHRoZSB3cmFwcGVkIGxpc3RlbmVyXG4gICAgICAgIHJldHVybiBvcmlnaW5hbEFkZEV2ZW50TGlzdGVuZXIuY2FsbCh0aGlzLCB0eXBlLCB3cmFwcGVkTGlzdGVuZXIsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgYWRkRXZlbnRMaXN0ZW5lciBmb3Igbm9uLWNsaWNrIGV2ZW50c1xuICAgICAgICByZXR1cm4gb3JpZ2luYWxBZGRFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpO1xuICAgIH1cbn07XG5jb25zb2xlLmxvZygnW01vbmtleSBQYXRjaF0gYWRkRXZlbnRMaXN0ZW5lciBzdWNjZXNzZnVsbHkgcGF0Y2hlZC4nKTtcbi8vIEZ1bmN0aW9uIHRvIGhhbmRsZSBjbGlja3Mgb24gPGE+IHRhZ3NcbmZ1bmN0aW9uIGhhbmRsZUFuY2hvckNsaWNrcygpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gQWRkIGRlYm91bmNpbmcgbG9naWNcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBpZiAobm93IC0gbGFzdENsaWNrVGltZXN0YW1wIDwgREVCT1VOQ0VfREVMQVkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW01vbmtleSBQYXRjaF0gRGVib3VuY2luZyBhbmNob3IgY2xpY2sgZXZlbnQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0Q2xpY2tUaW1lc3RhbXAgPSBub3c7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBjbG9zZXN0IDxhPiB0YWcgaW4gY2FzZSBvZiBuZXN0ZWQgZWxlbWVudHMgaW5zaWRlIHRoZSA8YT5cbiAgICAgICAgICAgIGNvbnN0IGFuY2hvciA9IHRhcmdldC5jbG9zZXN0KCdhJyk7XG4gICAgICAgICAgICBpZiAoYW5jaG9yICYmIGFuY2hvci50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdhJyAmJiBhbmNob3IuaHJlZikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbSW50ZXJjZXB0ZWRdIENsaWNrIG9uIDxhPiB0YWc6JywgYW5jaG9yLmhyZWYpO1xuICAgICAgICAgICAgICAgIGlmICghYW5jaG9yLmhyZWYuc3RhcnRzV2l0aCgnamF2YXNjcmlwdDonKSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRIcmVmID0gYW5jaG9yLmhyZWY7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDnm5HlkKzmiKrlm77lrozmiJDnmoTmtojmga9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcmVlbnNob3RDb21wbGV0ZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVNZXNzYWdlKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhLnR5cGUgPT09ICdTQ1JFRU5TSE9UX0NPTVBMRVRFJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YS50aW1lc3RhbXAgPT09IHRpbWVzdGFtcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZvaWQgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGV2ZW50LmRhdGEuZXJyb3IgfHwgJ1NjcmVlbnNob3QgZmFpbGVkJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5re75Yqg6LaF5pe25aSE55CGXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1NjcmVlbnNob3QgdGltZW91dCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwKTsgLy8gM+enkui2heaXtlxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlj5HpgIHmiKrlm77or7fmsYJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7IHR5cGU6ICdDQVBUVVJFX1NDUkVFTlNIT1QnLCB0aW1lc3RhbXA6IHRpbWVzdGFtcCB9LCAnKicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGNhcHR1cmVJbnRlcmFjdGlvbignY2xpY2tfYycsIGV2ZW50LnRhcmdldCwgdGltZXN0YW1wLCBnZW5lcmF0ZVNlbGVjdG9yKHRhcmdldCksIHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7IHR5cGU6ICdTQVZFX0lOVEVSQUNUSU9OX0RBVEEnLCBkYXRhOiBkYXRhIH0sICcqJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlcmFjdGlvbkNvbXBsZXRlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZU1lc3NhZ2UxKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhLnR5cGUgPT09ICdJTlRFUkFDVElPTl9DT01QTEVURScgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEudGltZXN0YW1wID09PSB0aW1lc3RhbXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlTWVzc2FnZTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodm9pZCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoZXZlbnQuZGF0YS5lcnJvciB8fCAnSW50ZXJhY3Rpb24gZmFpbGVkJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlTWVzc2FnZTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aW1lb3V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlTWVzc2FnZTEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdJbnRlcmFjdGlvbiB0aW1lb3V0JykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDnrYnlvoXmiKrlm77lrozmiJBcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIHNjcmVlbnNob3RDb21wbGV0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIGludGVyYWN0aW9uQ29tcGxldGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDmiKrlm77noa7orqTlrozmiJDlkI7lho3ot7PovaxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGFyZ2V0SHJlZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhcHR1cmluZyBzY3JlZW5zaG90OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGFyZ2V0SHJlZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSwgdHJ1ZSk7IC8vIFVzZSBjYXB0dXJlIHBoYXNlIHRvIGludGVyY2VwdCB0aGUgZXZlbnQgZWFybGllclxufVxuLy8gQ2FsbCB0aGUgZnVuY3Rpb24gdG8gaGFuZGxlIDxhPiB0YWcgY2xpY2tzXG5oYW5kbGVBbmNob3JDbGlja3MoKTtcbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0ge307XG5fX3dlYnBhY2tfbW9kdWxlc19fWzI3N10oKTtcbiJdLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJ2YWx1ZSIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSIsIm9yaWdpbmFsQWRkRXZlbnRMaXN0ZW5lciIsIkV2ZW50VGFyZ2V0IiwicHJvdG90eXBlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJsb2ciLCJsYXN0Q2xpY2tUaW1lc3RhbXAiLCJnZW5lcmF0ZVNlbGVjdG9yIiwiZWxlbWVudCIsImlkIiwicGF0aCIsImN1cnJlbnQiLCJkb2N1bWVudCIsImJvZHkiLCJwYXJlbnRFbGVtZW50Iiwic2VsZWN0b3IiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJjbGFzc05hbWUiLCJ0cmltIiwicmVwbGFjZSIsInNpYmxpbmciLCJudGgiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwidW5zaGlmdCIsImpvaW4iLCJjYXB0dXJlSW50ZXJhY3Rpb24iLCJldmVudFR5cGUiLCJ0YXJnZXQiLCJ0aW1lc3RhbXAiLCJ1cmwiLCJjbGlja2FibGVFbGVtZW50IiwiZmluZENsaWNrYWJsZVBhcmVudCIsImRlcHRoIiwiaGFzQXR0cmlidXRlIiwiY2xpY2thYmxlSWQiLCJnZXRBdHRyaWJ1dGUiLCJjdXJyZW50U25hcHNob3RJZCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInN0ciIsImhhc2giLCJpIiwibGVuZ3RoIiwiY2hhckNvZGVBdCIsInRvU3RyaW5nIiwiaGFzaENvZGUiLCJnZW5lcmF0ZUh0bWxTbmFwc2hvdElkIiwiaW5uZXJUZXh0Iiwib3V0ZXJIVE1MIiwidGFyZ2V0T3V0ZXJIVE1MIiwidGFyZ2V0Q2xhc3MiLCJ0YXJnZXRJZCIsInRhcmdldFRleHQiLCJodG1sU25hcHNob3RJZCIsImh0bWxDb250ZW50IiwiZG9jdW1lbnRFbGVtZW50IiwidHlwZSIsImxpc3RlbmVyIiwib3B0aW9ucyIsIndyYXBwZWRMaXN0ZW5lciIsImV2ZW50Iiwibm93IiwiYW5jaG9yIiwiY2xvc2VzdCIsInN0YXJ0c1dpdGgiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInRhcmdldEhyZWYiLCJzY3JlZW5zaG90Q29tcGxldGUiLCJoYW5kbGVNZXNzYWdlIiwiZGF0YSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzdWNjZXNzIiwiRXJyb3IiLCJlcnJvciIsInNldFRpbWVvdXQiLCJpbnRlcmFjdGlvbkNvbXBsZXRlIiwiaGFuZGxlTWVzc2FnZTEiLCJwb3N0TWVzc2FnZSIsImNhbGwiLCJoYW5kbGVFdmVudCJdLCJzb3VyY2VSb290IjoiIn0=